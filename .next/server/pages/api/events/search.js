"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/events/search";
exports.ids = ["pages/api/events/search"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "dotenv":
/*!*************************!*\
  !*** external "dotenv" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("dotenv");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "puppeteer":
/*!****************************!*\
  !*** external "puppeteer" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("puppeteer");

/***/ }),

/***/ "puppeteer-extra":
/*!**********************************!*\
  !*** external "puppeteer-extra" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("puppeteer-extra");

/***/ }),

/***/ "puppeteer-extra-plugin-stealth":
/*!*************************************************!*\
  !*** external "puppeteer-extra-plugin-stealth" ***!
  \*************************************************/
/***/ ((module) => {

module.exports = require("puppeteer-extra-plugin-stealth");

/***/ }),

/***/ "(api)/__barrel_optimize__?names=parse!=!./node_modules/date-fns/index.js":
/*!**************************************************************************!*\
  !*** __barrel_optimize__?names=parse!=!./node_modules/date-fns/index.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   parse: () => (/* reexport safe */ C_Users_cityz_IllI_play_tooket_node_modules_date_fns_parse_js__WEBPACK_IMPORTED_MODULE_0__.parse)
/* harmony export */ });
/* harmony import */ var C_Users_cityz_IllI_play_tooket_node_modules_date_fns_parse_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/date-fns/parse.js */ "(api)/./node_modules/date-fns/parse.js");



/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fevents%2Fsearch&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cevents%5Csearch.ts&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fevents%2Fsearch&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cevents%5Csearch.ts&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_events_search_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\events\\search.ts */ \"(api)/./pages/api/events/search.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_events_search_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_events_search_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/events/search\",\n        pathname: \"/api/events/search\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_events_search_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmV2ZW50cyUyRnNlYXJjaCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDZXZlbnRzJTVDc2VhcmNoLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQzREO0FBQzVEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyx3REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsd0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGlja2V0LXNlYXJjaGVyLz8zYmI1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcZXZlbnRzXFxcXHNlYXJjaC50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2V2ZW50cy9zZWFyY2hcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9ldmVudHMvc2VhcmNoXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fevents%2Fsearch&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cevents%5Csearch.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/services/search-service.ts":
/*!****************************************!*\
  !*** ./lib/services/search-service.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SearchService: () => (/* binding */ SearchService),\n/* harmony export */   searchService: () => (/* binding */ searchService)\n/* harmony export */ });\n/* harmony import */ var _src_stub_hub__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/stub-hub */ \"(api)/./src/stub-hub.js\");\n/* harmony import */ var _src_vivid_seats__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/vivid-seats */ \"(api)/./src/vivid-seats.js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _src_config_env__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/src/config/env */ \"(api)/./src/config/env.ts\");\n\n\n\n\nclass SearchService {\n    constructor(){\n        this.supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(_src_config_env__WEBPACK_IMPORTED_MODULE_3__.config.supabase.url, _src_config_env__WEBPACK_IMPORTED_MODULE_3__.config.supabase.serviceKey);\n        this.stubHubSearcher = new _src_stub_hub__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n        this.vividSeatsSearcher = new _src_vivid_seats__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n    }\n    async searchAll(params) {\n        try {\n            const searches = [];\n            if (params.source === \"all\" || params.source === \"stubhub\") {\n                searches.push(this.searchStubHub(params));\n            }\n            if (params.source === \"all\" || params.source === \"vividseats\") {\n                searches.push(this.searchVividSeats(params));\n            }\n            const results = await Promise.all(searches);\n            const combinedResults = results.flat();\n            return {\n                success: true,\n                data: combinedResults,\n                metadata: {\n                    total: combinedResults.length,\n                    sources: {\n                        stubhub: results[0]?.length || 0,\n                        vividseats: results[1]?.length || 0\n                    }\n                }\n            };\n        } catch (error) {\n            console.error(\"Search error:\", error);\n            return {\n                success: false,\n                error: \"Failed to perform search\",\n                metadata: {\n                    error: error instanceof Error ? error.message : \"Unknown error\"\n                }\n            };\n        }\n    }\n    async searchStubHub(params) {\n        return this.stubHubSearcher.searchConcerts(params.artist || params.keyword || \"\", params.venue || \"\", params.location || \"\");\n    }\n    async searchVividSeats(params) {\n        return this.vividSeatsSearcher.searchConcerts(params.artist || params.keyword || \"\", params.venue || \"\", params.location || \"\");\n    }\n}\nconst searchService = new SearchService();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmljZXMvc2VhcmNoLXNlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUE2QztBQUNNO0FBQ0U7QUFDWDtBQUduQyxNQUFNSTtJQUtYQyxhQUFjO1FBQ1osSUFBSSxDQUFDQyxRQUFRLEdBQUdKLG1FQUFZQSxDQUMxQkMsbURBQU1BLENBQUNHLFFBQVEsQ0FBQ0MsR0FBRyxFQUNuQkosbURBQU1BLENBQUNHLFFBQVEsQ0FBQ0UsVUFBVTtRQUU1QixJQUFJLENBQUNDLGVBQWUsR0FBRyxJQUFJVCxxREFBZUE7UUFDMUMsSUFBSSxDQUFDVSxrQkFBa0IsR0FBRyxJQUFJVCx3REFBa0JBO0lBQ2xEO0lBRUEsTUFBTVUsVUFBVUMsTUFBb0IsRUFBeUI7UUFDM0QsSUFBSTtZQUNGLE1BQU1DLFdBQVcsRUFBRTtZQUVuQixJQUFJRCxPQUFPRSxNQUFNLEtBQUssU0FBU0YsT0FBT0UsTUFBTSxLQUFLLFdBQVc7Z0JBQzFERCxTQUFTRSxJQUFJLENBQUMsSUFBSSxDQUFDQyxhQUFhLENBQUNKO1lBQ25DO1lBRUEsSUFBSUEsT0FBT0UsTUFBTSxLQUFLLFNBQVNGLE9BQU9FLE1BQU0sS0FBSyxjQUFjO2dCQUM3REQsU0FBU0UsSUFBSSxDQUFDLElBQUksQ0FBQ0UsZ0JBQWdCLENBQUNMO1lBQ3RDO1lBRUEsTUFBTU0sVUFBVSxNQUFNQyxRQUFRQyxHQUFHLENBQUNQO1lBQ2xDLE1BQU1RLGtCQUFrQkgsUUFBUUksSUFBSTtZQUVwQyxPQUFPO2dCQUNMQyxTQUFTO2dCQUNUQyxNQUFNSDtnQkFDTkksVUFBVTtvQkFDUkMsT0FBT0wsZ0JBQWdCTSxNQUFNO29CQUM3QkMsU0FBUzt3QkFDUEMsU0FBU1gsT0FBTyxDQUFDLEVBQUUsRUFBRVMsVUFBVTt3QkFDL0JHLFlBQVlaLE9BQU8sQ0FBQyxFQUFFLEVBQUVTLFVBQVU7b0JBQ3BDO2dCQUNGO1lBQ0Y7UUFDRixFQUFFLE9BQU9JLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLGlCQUFpQkE7WUFDL0IsT0FBTztnQkFDTFIsU0FBUztnQkFDVFEsT0FBTztnQkFDUE4sVUFBVTtvQkFDUk0sT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNRyxPQUFPLEdBQUc7Z0JBQ2xEO1lBQ0Y7UUFDRjtJQUNGO0lBRUEsTUFBY2xCLGNBQWNKLE1BQW9CLEVBQW9CO1FBQ2xFLE9BQU8sSUFBSSxDQUFDSCxlQUFlLENBQUMwQixjQUFjLENBQ3hDdkIsT0FBT3dCLE1BQU0sSUFBSXhCLE9BQU95QixPQUFPLElBQUksSUFDbkN6QixPQUFPMEIsS0FBSyxJQUFJLElBQ2hCMUIsT0FBTzJCLFFBQVEsSUFBSTtJQUV2QjtJQUVBLE1BQWN0QixpQkFBaUJMLE1BQW9CLEVBQW9CO1FBQ3JFLE9BQU8sSUFBSSxDQUFDRixrQkFBa0IsQ0FBQ3lCLGNBQWMsQ0FDM0N2QixPQUFPd0IsTUFBTSxJQUFJeEIsT0FBT3lCLE9BQU8sSUFBSSxJQUNuQ3pCLE9BQU8wQixLQUFLLElBQUksSUFDaEIxQixPQUFPMkIsUUFBUSxJQUFJO0lBRXZCO0FBQ0Y7QUFFTyxNQUFNQyxnQkFBZ0IsSUFBSXBDLGdCQUFnQiIsInNvdXJjZXMiOlsid2VicGFjazovL3RpY2tldC1zZWFyY2hlci8uL2xpYi9zZXJ2aWNlcy9zZWFyY2gtc2VydmljZS50cz9hMDQwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTdHViSHViU2VhcmNoZXIgZnJvbSAnQC9zcmMvc3R1Yi1odWInO1xyXG5pbXBvcnQgVml2aWRTZWF0c1NlYXJjaGVyIGZyb20gJ0Avc3JjL3ZpdmlkLXNlYXRzJztcclxuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcclxuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnQC9zcmMvY29uZmlnL2Vudic7XHJcbmltcG9ydCB0eXBlIHsgU2VhcmNoUGFyYW1zLCBTZWFyY2hSZXN1bHQsIEV2ZW50IH0gZnJvbSAnLi4vdHlwZXMvYXBpJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTZWFyY2hTZXJ2aWNlIHtcclxuICBwcml2YXRlIHN1cGFiYXNlO1xyXG4gIHByaXZhdGUgc3R1Ykh1YlNlYXJjaGVyOiBTdHViSHViU2VhcmNoZXI7XHJcbiAgcHJpdmF0ZSB2aXZpZFNlYXRzU2VhcmNoZXI6IFZpdmlkU2VhdHNTZWFyY2hlcjtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLnN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KFxyXG4gICAgICBjb25maWcuc3VwYWJhc2UudXJsLFxyXG4gICAgICBjb25maWcuc3VwYWJhc2Uuc2VydmljZUtleVxyXG4gICAgKTtcclxuICAgIHRoaXMuc3R1Ykh1YlNlYXJjaGVyID0gbmV3IFN0dWJIdWJTZWFyY2hlcigpO1xyXG4gICAgdGhpcy52aXZpZFNlYXRzU2VhcmNoZXIgPSBuZXcgVml2aWRTZWF0c1NlYXJjaGVyKCk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBzZWFyY2hBbGwocGFyYW1zOiBTZWFyY2hQYXJhbXMpOiBQcm9taXNlPFNlYXJjaFJlc3VsdD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc2VhcmNoZXMgPSBbXTtcclxuICAgICAgXHJcbiAgICAgIGlmIChwYXJhbXMuc291cmNlID09PSAnYWxsJyB8fCBwYXJhbXMuc291cmNlID09PSAnc3R1Ymh1YicpIHtcclxuICAgICAgICBzZWFyY2hlcy5wdXNoKHRoaXMuc2VhcmNoU3R1Ykh1YihwYXJhbXMpKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKHBhcmFtcy5zb3VyY2UgPT09ICdhbGwnIHx8IHBhcmFtcy5zb3VyY2UgPT09ICd2aXZpZHNlYXRzJykge1xyXG4gICAgICAgIHNlYXJjaGVzLnB1c2godGhpcy5zZWFyY2hWaXZpZFNlYXRzKHBhcmFtcykpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwoc2VhcmNoZXMpO1xyXG4gICAgICBjb25zdCBjb21iaW5lZFJlc3VsdHMgPSByZXN1bHRzLmZsYXQoKTtcclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBkYXRhOiBjb21iaW5lZFJlc3VsdHMsXHJcbiAgICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICAgIHRvdGFsOiBjb21iaW5lZFJlc3VsdHMubGVuZ3RoLFxyXG4gICAgICAgICAgc291cmNlczoge1xyXG4gICAgICAgICAgICBzdHViaHViOiByZXN1bHRzWzBdPy5sZW5ndGggfHwgMCxcclxuICAgICAgICAgICAgdml2aWRzZWF0czogcmVzdWx0c1sxXT8ubGVuZ3RoIHx8IDBcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdTZWFyY2ggZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIHBlcmZvcm0gc2VhcmNoJyxcclxuICAgICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBzZWFyY2hTdHViSHViKHBhcmFtczogU2VhcmNoUGFyYW1zKTogUHJvbWlzZTxFdmVudFtdPiB7XHJcbiAgICByZXR1cm4gdGhpcy5zdHViSHViU2VhcmNoZXIuc2VhcmNoQ29uY2VydHMoXHJcbiAgICAgIHBhcmFtcy5hcnRpc3QgfHwgcGFyYW1zLmtleXdvcmQgfHwgJycsXHJcbiAgICAgIHBhcmFtcy52ZW51ZSB8fCAnJyxcclxuICAgICAgcGFyYW1zLmxvY2F0aW9uIHx8ICcnXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBzZWFyY2hWaXZpZFNlYXRzKHBhcmFtczogU2VhcmNoUGFyYW1zKTogUHJvbWlzZTxFdmVudFtdPiB7XHJcbiAgICByZXR1cm4gdGhpcy52aXZpZFNlYXRzU2VhcmNoZXIuc2VhcmNoQ29uY2VydHMoXHJcbiAgICAgIHBhcmFtcy5hcnRpc3QgfHwgcGFyYW1zLmtleXdvcmQgfHwgJycsXHJcbiAgICAgIHBhcmFtcy52ZW51ZSB8fCAnJyxcclxuICAgICAgcGFyYW1zLmxvY2F0aW9uIHx8ICcnXHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHNlYXJjaFNlcnZpY2UgPSBuZXcgU2VhcmNoU2VydmljZSgpOyAiXSwibmFtZXMiOlsiU3R1Ykh1YlNlYXJjaGVyIiwiVml2aWRTZWF0c1NlYXJjaGVyIiwiY3JlYXRlQ2xpZW50IiwiY29uZmlnIiwiU2VhcmNoU2VydmljZSIsImNvbnN0cnVjdG9yIiwic3VwYWJhc2UiLCJ1cmwiLCJzZXJ2aWNlS2V5Iiwic3R1Ykh1YlNlYXJjaGVyIiwidml2aWRTZWF0c1NlYXJjaGVyIiwic2VhcmNoQWxsIiwicGFyYW1zIiwic2VhcmNoZXMiLCJzb3VyY2UiLCJwdXNoIiwic2VhcmNoU3R1Ykh1YiIsInNlYXJjaFZpdmlkU2VhdHMiLCJyZXN1bHRzIiwiUHJvbWlzZSIsImFsbCIsImNvbWJpbmVkUmVzdWx0cyIsImZsYXQiLCJzdWNjZXNzIiwiZGF0YSIsIm1ldGFkYXRhIiwidG90YWwiLCJsZW5ndGgiLCJzb3VyY2VzIiwic3R1Ymh1YiIsInZpdmlkc2VhdHMiLCJlcnJvciIsImNvbnNvbGUiLCJFcnJvciIsIm1lc3NhZ2UiLCJzZWFyY2hDb25jZXJ0cyIsImFydGlzdCIsImtleXdvcmQiLCJ2ZW51ZSIsImxvY2F0aW9uIiwic2VhcmNoU2VydmljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/services/search-service.ts\n");

/***/ }),

/***/ "(api)/./lib/utils/logger.ts":
/*!*****************************!*\
  !*** ./lib/utils/logger.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logger: () => (/* binding */ logger)\n/* harmony export */ });\nconst logger = {\n    info: (message, data)=>{\n        console.log(`[INFO] ${message}`, data || \"\");\n    },\n    error: (message, error)=>{\n        console.error(`[ERROR] ${message}`, error || \"\");\n    },\n    debug: (message, data)=>{\n        if (true) {\n            console.log(`[DEBUG] ${message}`, data || \"\");\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvdXRpbHMvbG9nZ2VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTyxNQUFNQSxTQUFTO0lBQ3BCQyxNQUFNLENBQUNDLFNBQWlCQztRQUN0QkMsUUFBUUMsR0FBRyxDQUFDLENBQUMsT0FBTyxFQUFFSCxRQUFRLENBQUMsRUFBRUMsUUFBUTtJQUMzQztJQUNBRyxPQUFPLENBQUNKLFNBQWlCSTtRQUN2QkYsUUFBUUUsS0FBSyxDQUFDLENBQUMsUUFBUSxFQUFFSixRQUFRLENBQUMsRUFBRUksU0FBUztJQUMvQztJQUNBQyxPQUFPLENBQUNMLFNBQWlCQztRQUN2QixJQUFJSyxJQUF5QixFQUFlO1lBQzFDSixRQUFRQyxHQUFHLENBQUMsQ0FBQyxRQUFRLEVBQUVILFFBQVEsQ0FBQyxFQUFFQyxRQUFRO1FBQzVDO0lBQ0Y7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGlja2V0LXNlYXJjaGVyLy4vbGliL3V0aWxzL2xvZ2dlci50cz83NTY1Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBsb2dnZXIgPSB7XHJcbiAgaW5mbzogKG1lc3NhZ2U6IHN0cmluZywgZGF0YT86IGFueSkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coYFtJTkZPXSAke21lc3NhZ2V9YCwgZGF0YSB8fCAnJyk7XHJcbiAgfSxcclxuICBlcnJvcjogKG1lc3NhZ2U6IHN0cmluZywgZXJyb3I/OiBhbnkpID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoYFtFUlJPUl0gJHttZXNzYWdlfWAsIGVycm9yIHx8ICcnKTtcclxuICB9LFxyXG4gIGRlYnVnOiAobWVzc2FnZTogc3RyaW5nLCBkYXRhPzogYW55KSA9PiB7XHJcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcclxuICAgICAgY29uc29sZS5sb2coYFtERUJVR10gJHttZXNzYWdlfWAsIGRhdGEgfHwgJycpO1xyXG4gICAgfVxyXG4gIH1cclxufTsgIl0sIm5hbWVzIjpbImxvZ2dlciIsImluZm8iLCJtZXNzYWdlIiwiZGF0YSIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsImRlYnVnIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/utils/logger.ts\n");

/***/ }),

/***/ "(api)/./pages/api/events/search.ts":
/*!************************************!*\
  !*** ./pages/api/events/search.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_services_search_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/services/search-service */ \"(api)/./lib/services/search-service.ts\");\n/* harmony import */ var _lib_utils_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/utils/logger */ \"(api)/./lib/utils/logger.ts\");\n\n\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            success: false,\n            error: \"Method not allowed\",\n            metadata: {}\n        });\n    }\n    try {\n        const params = req.body;\n        _lib_utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(\"Search request received\", params);\n        // Run both searches in parallel\n        const result = await _lib_services_search_service__WEBPACK_IMPORTED_MODULE_0__.searchService.searchAll({\n            ...params,\n            source: \"all\" // This will trigger both StubHub and VividSeats searches\n        });\n        return res.status(result.success ? 200 : 500).json(result);\n    } catch (error) {\n        _lib_utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"API error:\", error);\n        return res.status(500).json({\n            success: false,\n            error: \"Internal server error\",\n            metadata: {\n                error: error instanceof Error ? error.message : \"Unknown error\"\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvZXZlbnRzL3NlYXJjaC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFDOEQ7QUFFbEI7QUFFN0IsZUFBZUUsUUFDNUJDLEdBQW1CLEVBQ25CQyxHQUFrQztJQUVsQyxJQUFJRCxJQUFJRSxNQUFNLEtBQUssUUFBUTtRQUN6QixPQUFPRCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCQyxTQUFTO1lBQ1RDLE9BQU87WUFDUEMsVUFBVSxDQUFDO1FBQ2I7SUFDRjtJQUVBLElBQUk7UUFDRixNQUFNQyxTQUFTUixJQUFJUyxJQUFJO1FBQ3ZCWCxxREFBTUEsQ0FBQ1ksSUFBSSxDQUFDLDJCQUEyQkY7UUFFdkMsZ0NBQWdDO1FBQ2hDLE1BQU1HLFNBQVMsTUFBTWQsdUVBQWFBLENBQUNlLFNBQVMsQ0FBQztZQUMzQyxHQUFHSixNQUFNO1lBQ1RLLFFBQVEsTUFBTyx5REFBeUQ7UUFDMUU7UUFFQSxPQUFPWixJQUFJRSxNQUFNLENBQUNRLE9BQU9OLE9BQU8sR0FBRyxNQUFNLEtBQUtELElBQUksQ0FBQ087SUFDckQsRUFBRSxPQUFPTCxPQUFPO1FBQ2RSLHFEQUFNQSxDQUFDUSxLQUFLLENBQUMsY0FBY0E7UUFDM0IsT0FBT0wsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUMxQkMsU0FBUztZQUNUQyxPQUFPO1lBQ1BDLFVBQVU7Z0JBQ1JELE9BQU9BLGlCQUFpQlEsUUFBUVIsTUFBTVMsT0FBTyxHQUFHO1lBQ2xEO1FBQ0Y7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGlja2V0LXNlYXJjaGVyLy4vcGFnZXMvYXBpL2V2ZW50cy9zZWFyY2gudHM/YWViYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XHJcbmltcG9ydCB7IHNlYXJjaFNlcnZpY2UgfSBmcm9tICdAL2xpYi9zZXJ2aWNlcy9zZWFyY2gtc2VydmljZSc7XHJcbmltcG9ydCB0eXBlIHsgU2VhcmNoUGFyYW1zLCBTZWFyY2hSZXN1bHQgfSBmcm9tICdAL2xpYi90eXBlcy9hcGknO1xyXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdAL2xpYi91dGlscy9sb2dnZXInO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihcclxuICByZXE6IE5leHRBcGlSZXF1ZXN0LFxyXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlPFNlYXJjaFJlc3VsdD5cclxuKSB7XHJcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJykge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyxcclxuICAgICAgbWV0YWRhdGE6IHt9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBwYXJhbXMgPSByZXEuYm9keSBhcyBTZWFyY2hQYXJhbXM7XHJcbiAgICBsb2dnZXIuaW5mbygnU2VhcmNoIHJlcXVlc3QgcmVjZWl2ZWQnLCBwYXJhbXMpO1xyXG5cclxuICAgIC8vIFJ1biBib3RoIHNlYXJjaGVzIGluIHBhcmFsbGVsXHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZWFyY2hTZXJ2aWNlLnNlYXJjaEFsbCh7XHJcbiAgICAgIC4uLnBhcmFtcyxcclxuICAgICAgc291cmNlOiAnYWxsJyAgLy8gVGhpcyB3aWxsIHRyaWdnZXIgYm90aCBTdHViSHViIGFuZCBWaXZpZFNlYXRzIHNlYXJjaGVzXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhyZXN1bHQuc3VjY2VzcyA/IDIwMCA6IDUwMCkuanNvbihyZXN1bHQpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBsb2dnZXIuZXJyb3IoJ0FQSSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InLFxyXG4gICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn0gIl0sIm5hbWVzIjpbInNlYXJjaFNlcnZpY2UiLCJsb2dnZXIiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJlcnJvciIsIm1ldGFkYXRhIiwicGFyYW1zIiwiYm9keSIsImluZm8iLCJyZXN1bHQiLCJzZWFyY2hBbGwiLCJzb3VyY2UiLCJFcnJvciIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/events/search.ts\n");

/***/ }),

/***/ "(api)/./src/config/env.ts":
/*!***************************!*\
  !*** ./src/config/env.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config)\n/* harmony export */ });\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dotenv */ \"dotenv\");\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dotenv__WEBPACK_IMPORTED_MODULE_0__);\n\n// Load environment variables\ndotenv__WEBPACK_IMPORTED_MODULE_0___default().config();\nconst config = {\n    supabase: {\n        url: \"https://rkctqjbksmszuhrocxxm.supabase.co\",\n        serviceKey: process.env.SUPABASE_SERVICE_KEY,\n        anonKey: process.env.SUPABASE_KEY\n    },\n    environment: \"development\" || 0\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvY29uZmlnL2Vudi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNEI7QUFFNUIsNkJBQTZCO0FBQzdCQSxvREFBYTtBQUVOLE1BQU1DLFNBQVM7SUFDcEJDLFVBQVU7UUFDUkMsS0FBS0MsMENBQW9DO1FBQ3pDRyxZQUFZSCxRQUFRQyxHQUFHLENBQUNHLG9CQUFvQjtRQUM1Q0MsU0FBU0wsUUFBUUMsR0FBRyxDQUFDSyxZQUFZO0lBQ25DO0lBQ0FDLGFBQWFQLGlCQUF3QjtBQUN2QyxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGlja2V0LXNlYXJjaGVyLy4vc3JjL2NvbmZpZy9lbnYudHM/NWFmMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XHJcblxyXG4vLyBMb2FkIGVudmlyb25tZW50IHZhcmlhYmxlc1xyXG5kb3RlbnYuY29uZmlnKCk7XHJcblxyXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xyXG4gIHN1cGFiYXNlOiB7XHJcbiAgICB1cmw6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXHJcbiAgICBzZXJ2aWNlS2V5OiBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX0tFWSEsXHJcbiAgICBhbm9uS2V5OiBwcm9jZXNzLmVudi5TVVBBQkFTRV9LRVkhXHJcbiAgfSxcclxuICBlbnZpcm9ubWVudDogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgfHwgJ2RldmVsb3BtZW50J1xyXG59OyAiXSwibmFtZXMiOlsiZG90ZW52IiwiY29uZmlnIiwic3VwYWJhc2UiLCJ1cmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic2VydmljZUtleSIsIlNVUEFCQVNFX1NFUlZJQ0VfS0VZIiwiYW5vbktleSIsIlNVUEFCQVNFX0tFWSIsImVudmlyb25tZW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/config/env.ts\n");

/***/ }),

/***/ "(api)/./src/stub-hub.js":
/*!*************************!*\
  !*** ./src/stub-hub.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _src_config_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/config/env */ \"(api)/./src/config/env.ts\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ \"(api)/./src/utils.js\");\n\n\n\n\nconst supabaseClient = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(_src_config_env__WEBPACK_IMPORTED_MODULE_1__.config.supabase.url, _src_config_env__WEBPACK_IMPORTED_MODULE_1__.config.supabase.serviceKey);\nclass StubHubSearcher {\n    constructor(){\n        this.baseUrl = \"https://www.stubhub.com/secure/search\";\n    }\n    generateSearchUrl(artist, venue, location) {\n        const searchParams = new URLSearchParams();\n        const searchTerms = [\n            artist,\n            venue,\n            location\n        ].filter(Boolean);\n        searchParams.append(\"q\", searchTerms.join(\" \"));\n        return `${this.baseUrl}?${searchParams.toString()}`;\n    }\n    async setupBrowser() {\n        return await (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.setupBrowser)();\n    }\n    async setupPage(browser) {\n        return await (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.setupPage)(browser);\n    }\n    async getTicketPrices(eventUrl, existingPage = null) {\n        let browser = null;\n        let page = existingPage;\n        try {\n            if (!existingPage) {\n                browser = await this.setupBrowser();\n                page = await this.setupPage(browser);\n                console.log(\"Navigating to event page:\", eventUrl);\n                // Initial navigation\n                await page.goto(eventUrl, {\n                    waitUntil: \"domcontentloaded\",\n                    timeout: 30000\n                });\n            }\n            // Function to check for listings container\n            const checkListingsContainer = async ()=>{\n                console.log(\"Checking for listings container...\");\n                const content = await page.content();\n                return content.includes(\"listings-container\");\n            };\n            // First check\n            let hasListings = await checkListingsContainer();\n            // If not found, try reloading\n            if (!hasListings) {\n                console.log(\"Listings container not found, reloading page...\");\n                try {\n                    await Promise.race([\n                        page.reload({\n                            waitUntil: \"domcontentloaded\"\n                        }),\n                        new Promise((_, reject)=>setTimeout(()=>reject(new Error(\"Reload timeout\")), 10000))\n                    ]);\n                    // Wait a moment for any dynamic content\n                    await page.waitForTimeout(2000);\n                    // Check again after reload\n                    hasListings = await checkListingsContainer();\n                    if (!hasListings) {\n                        console.log(\"Listings container still not found after reload, trying alternative approach...\");\n                        // Try navigating to the URL again\n                        await page.goto(eventUrl, {\n                            waitUntil: \"domcontentloaded\",\n                            timeout: 10000\n                        });\n                        await page.waitForTimeout(2000);\n                        hasListings = await checkListingsContainer();\n                    }\n                } catch (reloadError) {\n                    console.log(\"Reload failed, trying alternative approach...\", reloadError.message);\n                    // If reload times out, try navigating to the URL again\n                    await page.goto(eventUrl, {\n                        waitUntil: \"domcontentloaded\",\n                        timeout: 10000\n                    });\n                    await page.waitForTimeout(2000);\n                    hasListings = await checkListingsContainer();\n                }\n            }\n            // Wait for listings container with multiple selector attempts\n            let listingsFound = false;\n            const selectors = [\n                \"#listings-container\",\n                '[data-testid=\"listings-container\"]',\n                \".listing-container\",\n                '[data-testid=\"event-listings\"]'\n            ];\n            console.log(\"Waiting for listings container to be visible...\");\n            for (const selector of selectors){\n                try {\n                    await page.waitForSelector(selector, {\n                        timeout: 5000,\n                        visible: true\n                    });\n                    console.log(`Found listings container with selector: ${selector}`);\n                    listingsFound = true;\n                    break;\n                } catch (error) {\n                    console.log(`Selector ${selector} not found, trying next...`);\n                }\n            }\n            if (!listingsFound) {\n                console.error(\"Could not find listings container with any known selector\");\n                await page.screenshot({\n                    path: \"listings-error.png\",\n                    fullPage: true\n                });\n                throw new Error(\"Listings container not found after all attempts\");\n            }\n            // Wait for actual ticket listings to load with shorter timeout\n            await page.waitForFunction(()=>{\n                const listings = document.querySelectorAll(\"[data-listing-id]\");\n                return listings.length > 0;\n            }, {\n                timeout: 10000\n            });\n            // Additional delay to ensure all dynamic content is loaded\n            await page.waitForTimeout(1000);\n            const tickets = await page.evaluate(()=>{\n                const listings = Array.from(document.querySelectorAll(\"[data-listing-id]\"));\n                console.log(`Processing ${listings.length} listings`);\n                const ticketsBySection = {};\n                listings.forEach((listing, index)=>{\n                    try {\n                        // Skip sold tickets\n                        if (listing.getAttribute(\"data-is-sold\") === \"1\") return;\n                        // Get section name with multiple selector attempts\n                        const section = listing.querySelector(\".sc-hlalgf-6\")?.textContent?.trim() || listing.querySelector('[data-testid=\"section-name\"]')?.textContent?.trim() || listing.querySelector('[data-auto=\"listing-section\"]')?.textContent?.trim() || \"General Admission\";\n                        // Get price with multiple selector attempts\n                        const priceElement = listing.querySelector('[data-testid=\"listing-price\"]') || listing.querySelector(\".sc-hlalgf-1\") || listing.querySelector('[data-auto=\"listing-price\"]');\n                        const price = priceElement?.textContent?.trim();\n                        // Get quantity with multiple selector attempts\n                        const quantity = listing.querySelector(\".sc-hlalgf-14\")?.textContent?.trim() || listing.querySelector('[data-testid=\"quantity\"]')?.textContent?.trim() || listing.querySelector('[data-auto=\"listing-quantity\"]')?.textContent?.trim();\n                        if (!price) return;\n                        if (!ticketsBySection[section]) {\n                            ticketsBySection[section] = {\n                                section,\n                                tickets: [],\n                                lowestPrice: Infinity,\n                                highestPrice: -Infinity,\n                                numberOfListings: 0\n                            };\n                        }\n                        const numericPrice = parseFloat(price.replace(/[^0-9.]/g, \"\"));\n                        const ticketInfo = {\n                            quantity,\n                            price,\n                            rawPrice: numericPrice,\n                            listingUrl: window.location.href,\n                            listingId: listing.getAttribute(\"data-listing-id\")\n                        };\n                        ticketsBySection[section].tickets.push(ticketInfo);\n                        if (!isNaN(numericPrice)) {\n                            ticketsBySection[section].lowestPrice = Math.min(ticketsBySection[section].lowestPrice, numericPrice);\n                            ticketsBySection[section].highestPrice = Math.max(ticketsBySection[section].highestPrice, numericPrice);\n                            ticketsBySection[section].numberOfListings++;\n                        }\n                    } catch (err) {\n                        console.log(`Error processing listing ${index}:`, err);\n                    }\n                });\n                Object.values(ticketsBySection).forEach((section)=>{\n                    if (section.lowestPrice === Infinity) section.lowestPrice = null;\n                    if (section.highestPrice === -Infinity) section.highestPrice = null;\n                    section.tickets.sort((a, b)=>(a.rawPrice || Infinity) - (b.rawPrice || Infinity));\n                });\n                return {\n                    totalSections: Object.keys(ticketsBySection).length,\n                    sections: Object.values(ticketsBySection)\n                };\n            });\n            console.log(`Found tickets in ${tickets.totalSections} sections`);\n            return tickets;\n        } catch (error) {\n            console.error(\"Error fetching ticket prices:\", error);\n            if (page) {\n                await page.screenshot({\n                    path: \"error-state.png\",\n                    fullPage: true\n                });\n                const content = await page.content();\n                console.log(\"Page content at error:\", content.substring(0, 500) + \"...\");\n            }\n            return {\n                totalSections: 0,\n                sections: []\n            };\n        } finally{\n            if (browser && !existingPage) {\n                await browser.close();\n            }\n        }\n    }\n    async searchConcerts(artist, venue, location) {\n        const browser = await this.setupBrowser();\n        let searchPage;\n        let eventPage;\n        try {\n            searchPage = await this.setupPage(browser);\n            const searchUrl = this.generateSearchUrl(artist, venue, location);\n            console.log(\"Searching StubHub:\", searchUrl);\n            await searchPage.goto(searchUrl, {\n                waitUntil: \"networkidle0\",\n                timeout: 30000\n            });\n            console.log(\"Page loaded, checking content...\");\n            await searchPage.waitForTimeout(2000);\n            let content = await searchPage.content();\n            if (!content.includes('data-testid=\"primaryGrid\"')) {\n                console.log(\"Reloading page due to missing content...\");\n                await searchPage.reload({\n                    waitUntil: \"domcontentloaded\"\n                });\n                await searchPage.waitForTimeout(3000);\n            }\n            console.log(\"Waiting for primary grid...\");\n            await searchPage.waitForSelector('[data-testid=\"primaryGrid\"]');\n            console.log(\"Found primary grid, extracting events...\");\n            await searchPage.waitForTimeout(2000);\n            const events = await this.extractEventDetails(searchPage);\n            console.log(`\\nRaw events extracted: ${events.length}`);\n            const matchingEvents = events.filter((event)=>{\n                console.log(\"Checking event:\", event.name);\n                const titleMatch = !artist || event.name.toLowerCase().includes(artist.toLowerCase());\n                const venueMatch = !venue || event.venue.toLowerCase().includes(venue.toLowerCase());\n                const locationMatch = !location || event.location.toLowerCase().includes(location.toLowerCase());\n                console.log(\"Match results:\", {\n                    titleMatch,\n                    venueMatch,\n                    locationMatch\n                });\n                return titleMatch && venueMatch && locationMatch;\n            });\n            console.log(\"Found matching events:\", matchingEvents.length);\n            const eventsWithTickets = [];\n            for (const event of matchingEvents){\n                const { success, page: newPage } = await this.navigateToEvent(searchPage, event);\n                if (success && newPage) {\n                    eventPage = newPage;\n                    const tickets = await this.getTicketPrices(event.link, eventPage);\n                    console.log(\"Scraped Tickets:\", JSON.stringify(tickets, null, 2));\n                    eventsWithTickets.push({\n                        name: event.name,\n                        date: event.date,\n                        venue: event.venue,\n                        location: event.location,\n                        category: event.category,\n                        link: event.link,\n                        source: event.source,\n                        tickets: tickets\n                    });\n                    await eventPage.close();\n                    await searchPage.waitForTimeout(1000);\n                }\n            }\n            return eventsWithTickets;\n        } catch (error) {\n            console.error(\"Search error:\", error);\n            if (searchPage) {\n                await searchPage.screenshot({\n                    path: \"error.png\",\n                    fullPage: true\n                });\n            }\n            return [];\n        } finally{\n            if (eventPage && !eventPage.isClosed()) await eventPage.close();\n            if (searchPage && !searchPage.isClosed()) await searchPage.close();\n            if (browser) await browser.close();\n        }\n    }\n    // Updated extractEventDetails method\n    async extractEventDetails(page) {\n        console.log(\"Starting event extraction in Node\");\n        const results = await page.evaluate(()=>{\n            const results = {\n                logs: [],\n                events: []\n            };\n            const eventContainer = document.querySelector('[data-testid=\"primaryGrid\"]');\n            results.logs.push(`Found container: ${!!eventContainer}`);\n            if (!eventContainer) {\n                results.logs.push(\"No event container found\");\n                return results;\n            }\n            const listItems = Array.from(eventContainer.querySelectorAll(\"li\")).slice(1);\n            results.logs.push(`Processing ${listItems.length} event items`);\n            listItems.forEach((item, index)=>{\n                try {\n                    const link = item.querySelector(\"a\");\n                    const titleMatch = item.textContent.match(/(?:PM|AM)(.*?)(?:Byline|Shed|Theatre|Arena|Center|Complex|Bar|Bottle)/);\n                    const title = titleMatch?.[1]?.trim() || \"\";\n                    const timeElement = item.querySelector(\"time\");\n                    const dateText = timeElement?.textContent?.trim() || \"\";\n                    // Updated regex to handle year in the middle\n                    const dateMatch = dateText.match(/([A-Za-z]+)\\s+(\\d+)\\s+(\\d{4})([A-Za-z]+)(\\d+:\\d+\\s*[AP]M)/i);\n                    let formattedDate = null;\n                    if (dateMatch) {\n                        const [_, month, day, year, dayOfWeek, time] = dateMatch;\n                        const dateStr = `${month} ${day} ${year} ${time}`;\n                        formattedDate = dateStr;\n                        results.logs.push(`Parsed Date String: ${dateStr}`);\n                    } else {\n                        results.logs.push(`Failed to parse date from text: \"${dateText}\"`);\n                    }\n                    const venueMatch = item.textContent.match(/(?:at\\s)?((?:Byline|Shed|Theatre|Arena|Center|Complex|Bar|Bottle)[^,]+)/);\n                    const venue = venueMatch?.[1]?.trim() || \"\";\n                    const locationMatch = item.textContent.match(/([^,]+,\\s*[A-Z]{2})/);\n                    const location = locationMatch?.[1]?.trim() || \"\";\n                    // Set category\n                    const category = \"Concert\";\n                    if (title && formattedDate && venue && location && link?.href) {\n                        results.events.push({\n                            name: title,\n                            date: formattedDate,\n                            venue,\n                            location,\n                            category,\n                            link: link.href,\n                            source: \"stubhub\"\n                        });\n                        // Add debug logging for successful event\n                        results.logs.push(`Successfully parsed event: ${title} on ${formattedDate}`);\n                    } else {\n                        results.logs.push(`Incomplete data for event ${index + 1}, skipping insertion.`);\n                        results.logs.push(`Title: ${title}`);\n                        results.logs.push(`Date: ${formattedDate}`);\n                        results.logs.push(`Venue: ${venue}`);\n                        results.logs.push(`Location: ${location}`);\n                        results.logs.push(`Has link: ${!!link?.href}`);\n                    }\n                    // Debug logging\n                    results.logs.push(`\\nList Item ${index + 1}:`);\n                    results.logs.push(`Name: ${title}`);\n                    results.logs.push(`Date: ${formattedDate}`);\n                    results.logs.push(`Original Date Text: ${dateText}`);\n                    results.logs.push(`Venue: ${venue}`);\n                    results.logs.push(`Location: ${location}`);\n                    results.logs.push(`Category: ${category}`);\n                    results.logs.push(`Has link: ${!!link?.href}`);\n                } catch (err) {\n                    results.logs.push(`Error processing item ${index + 1}: ${err.message}`);\n                }\n            });\n            return results;\n        });\n        // Log debug information\n        results.logs.forEach((log)=>console.log(log));\n        return results.events;\n    }\n    // navigateToEvent remains unchanged\n    async navigateToEvent(page, event) {\n        try {\n            console.log(\"Attempting to navigate to event:\", event.name);\n            const containerSelector = '[data-testid=\"primaryGrid\"]';\n            await page.waitForSelector(containerSelector);\n            console.log(\"Found event container\");\n            // Get all event links\n            const eventLinks = await page.$$(`${containerSelector} a[href*=\"/event/\"]`);\n            console.log(\"Found event links:\", eventLinks.length);\n            for (const link of eventLinks){\n                const linkContent = await link.evaluate((el)=>{\n                    return {\n                        text: el.textContent.replace(/\\s+/g, \" \").trim(),\n                        href: el.href\n                    };\n                });\n                console.log(\"Checking link:\", linkContent);\n                if (linkContent.text.includes(event.name)) {\n                    console.log(\"Found matching event, clicking link\");\n                    // Create a promise that resolves when a new page is created\n                    const newPagePromise = new Promise((resolve)=>page.browser().once(\"targetcreated\", async (target)=>{\n                            const newPage = await target.page();\n                            resolve(newPage);\n                        }));\n                    // Click the link\n                    await link.click();\n                    // Wait for the new page to open\n                    const newPage = await newPagePromise;\n                    console.log(\"New page opened\");\n                    // Wait for the listings container in the new page\n                    await newPage.waitForSelector(\"#listings-container\", {\n                        timeout: 60000\n                    });\n                    console.log(\"Event page loaded\");\n                    // Return both success status and the new page\n                    return {\n                        success: true,\n                        page: newPage\n                    };\n                }\n            }\n            console.log(`Could not find event with name: ${event.name}`);\n            return {\n                success: false,\n                page: null\n            };\n        } catch (error) {\n            console.error(\"Navigation error:\", error);\n            return {\n                success: false,\n                page: null\n            };\n        }\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (StubHubSearcher);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU07b0JBQ3RFSixRQUFRQyxHQUFHLENBQUM7b0JBRVosOENBQThDO29CQUM5QyxPQUFPO3dCQUFFMkYsU0FBUzt3QkFBTTdGLE1BQU04RjtvQkFBUTtnQkFDeEM7WUFDRjtZQUVBN0YsUUFBUUMsR0FBRyxDQUFDLENBQUMsZ0NBQWdDLEVBQUVvRixNQUFNQyxJQUFJLENBQUMsQ0FBQztZQUMzRCxPQUFPO2dCQUFFTSxTQUFTO2dCQUFPN0YsTUFBTTtZQUFLO1FBQ3RDLEVBQUUsT0FBT3lCLE9BQU87WUFDZHhCLFFBQVF3QixLQUFLLENBQUMscUJBQXFCQTtZQUNuQyxPQUFPO2dCQUFFb0UsU0FBUztnQkFBTzdGLE1BQU07WUFBSztRQUN0QztJQUNGO0FBQ0Y7QUFFQSxpRUFBZW5CLGVBQWVBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90aWNrZXQtc2VhcmNoZXIvLi9zcmMvc3R1Yi1odWIuanM/NjFkMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xyXG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICdAL3NyYy9jb25maWcvZW52JztcclxuaW1wb3J0IHsgc2V0dXBCcm93c2VyLCBzZXR1cFBhZ2UgfSBmcm9tICcuL3V0aWxzLmpzJztcclxuaW1wb3J0IHsgcGFyc2UgfSBmcm9tICdkYXRlLWZucyc7XHJcblxyXG5jb25zdCBzdXBhYmFzZUNsaWVudCA9IGNyZWF0ZUNsaWVudChcclxuICBjb25maWcuc3VwYWJhc2UudXJsLFxyXG4gIGNvbmZpZy5zdXBhYmFzZS5zZXJ2aWNlS2V5XHJcbik7XHJcblxyXG5jbGFzcyBTdHViSHViU2VhcmNoZXIge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5iYXNlVXJsID0gJ2h0dHBzOi8vd3d3LnN0dWJodWIuY29tL3NlY3VyZS9zZWFyY2gnO1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVTZWFyY2hVcmwoYXJ0aXN0LCB2ZW51ZSwgbG9jYXRpb24pIHtcclxuICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcclxuICAgIGNvbnN0IHNlYXJjaFRlcm1zID0gW2FydGlzdCwgdmVudWUsIGxvY2F0aW9uXS5maWx0ZXIoQm9vbGVhbik7XHJcbiAgICBzZWFyY2hQYXJhbXMuYXBwZW5kKCdxJywgc2VhcmNoVGVybXMuam9pbignICcpKTtcclxuICAgIHJldHVybiBgJHt0aGlzLmJhc2VVcmx9PyR7c2VhcmNoUGFyYW1zLnRvU3RyaW5nKCl9YDtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNldHVwQnJvd3NlcigpIHtcclxuICAgIHJldHVybiBhd2FpdCBzZXR1cEJyb3dzZXIoKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNldHVwUGFnZShicm93c2VyKSB7XHJcbiAgICByZXR1cm4gYXdhaXQgc2V0dXBQYWdlKGJyb3dzZXIpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0VGlja2V0UHJpY2VzKGV2ZW50VXJsLCBleGlzdGluZ1BhZ2UgPSBudWxsKSB7XHJcbiAgICBsZXQgYnJvd3NlciA9IG51bGw7XHJcbiAgICBsZXQgcGFnZSA9IGV4aXN0aW5nUGFnZTtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKCFleGlzdGluZ1BhZ2UpIHtcclxuICAgICAgICBicm93c2VyID0gYXdhaXQgdGhpcy5zZXR1cEJyb3dzZXIoKTtcclxuICAgICAgICBwYWdlID0gYXdhaXQgdGhpcy5zZXR1cFBhZ2UoYnJvd3Nlcik7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ05hdmlnYXRpbmcgdG8gZXZlbnQgcGFnZTonLCBldmVudFVybCk7XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWwgbmF2aWdhdGlvblxyXG4gICAgICAgIGF3YWl0IHBhZ2UuZ290byhldmVudFVybCwgeyBcclxuICAgICAgICAgIHdhaXRVbnRpbDogJ2RvbWNvbnRlbnRsb2FkZWQnLFxyXG4gICAgICAgICAgdGltZW91dDogMzAwMDAgXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEZ1bmN0aW9uIHRvIGNoZWNrIGZvciBsaXN0aW5ncyBjb250YWluZXJcclxuICAgICAgY29uc3QgY2hlY2tMaXN0aW5nc0NvbnRhaW5lciA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnQ2hlY2tpbmcgZm9yIGxpc3RpbmdzIGNvbnRhaW5lci4uLicpO1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBwYWdlLmNvbnRlbnQoKTtcclxuICAgICAgICByZXR1cm4gY29udGVudC5pbmNsdWRlcygnbGlzdGluZ3MtY29udGFpbmVyJyk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBGaXJzdCBjaGVja1xyXG4gICAgICBsZXQgaGFzTGlzdGluZ3MgPSBhd2FpdCBjaGVja0xpc3RpbmdzQ29udGFpbmVyKCk7XHJcblxyXG4gICAgICAvLyBJZiBub3QgZm91bmQsIHRyeSByZWxvYWRpbmdcclxuICAgICAgaWYgKCFoYXNMaXN0aW5ncykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdMaXN0aW5ncyBjb250YWluZXIgbm90IGZvdW5kLCByZWxvYWRpbmcgcGFnZS4uLicpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBhd2FpdCBQcm9taXNlLnJhY2UoW1xyXG4gICAgICAgICAgICBwYWdlLnJlbG9hZCh7IHdhaXRVbnRpbDogJ2RvbWNvbnRlbnRsb2FkZWQnIH0pLFxyXG4gICAgICAgICAgICBuZXcgUHJvbWlzZSgoXywgcmVqZWN0KSA9PiBzZXRUaW1lb3V0KCgpID0+IHJlamVjdChuZXcgRXJyb3IoJ1JlbG9hZCB0aW1lb3V0JykpLCAxMDAwMCkpXHJcbiAgICAgICAgICBdKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gV2FpdCBhIG1vbWVudCBmb3IgYW55IGR5bmFtaWMgY29udGVudFxyXG4gICAgICAgICAgYXdhaXQgcGFnZS53YWl0Rm9yVGltZW91dCgyMDAwKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gQ2hlY2sgYWdhaW4gYWZ0ZXIgcmVsb2FkXHJcbiAgICAgICAgICBoYXNMaXN0aW5ncyA9IGF3YWl0IGNoZWNrTGlzdGluZ3NDb250YWluZXIoKTtcclxuICAgICAgICAgIGlmICghaGFzTGlzdGluZ3MpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0xpc3RpbmdzIGNvbnRhaW5lciBzdGlsbCBub3QgZm91bmQgYWZ0ZXIgcmVsb2FkLCB0cnlpbmcgYWx0ZXJuYXRpdmUgYXBwcm9hY2guLi4nKTtcclxuICAgICAgICAgICAgLy8gVHJ5IG5hdmlnYXRpbmcgdG8gdGhlIFVSTCBhZ2FpblxyXG4gICAgICAgICAgICBhd2FpdCBwYWdlLmdvdG8oZXZlbnRVcmwsIHsgXHJcbiAgICAgICAgICAgICAgd2FpdFVudGlsOiAnZG9tY29udGVudGxvYWRlZCcsXHJcbiAgICAgICAgICAgICAgdGltZW91dDogMTAwMDAgXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhd2FpdCBwYWdlLndhaXRGb3JUaW1lb3V0KDIwMDApO1xyXG4gICAgICAgICAgICBoYXNMaXN0aW5ncyA9IGF3YWl0IGNoZWNrTGlzdGluZ3NDb250YWluZXIoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChyZWxvYWRFcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1JlbG9hZCBmYWlsZWQsIHRyeWluZyBhbHRlcm5hdGl2ZSBhcHByb2FjaC4uLicsIHJlbG9hZEVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgLy8gSWYgcmVsb2FkIHRpbWVzIG91dCwgdHJ5IG5hdmlnYXRpbmcgdG8gdGhlIFVSTCBhZ2FpblxyXG4gICAgICAgICAgYXdhaXQgcGFnZS5nb3RvKGV2ZW50VXJsLCB7IFxyXG4gICAgICAgICAgICB3YWl0VW50aWw6ICdkb21jb250ZW50bG9hZGVkJyxcclxuICAgICAgICAgICAgdGltZW91dDogMTAwMDAgXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGF3YWl0IHBhZ2Uud2FpdEZvclRpbWVvdXQoMjAwMCk7XHJcbiAgICAgICAgICBoYXNMaXN0aW5ncyA9IGF3YWl0IGNoZWNrTGlzdGluZ3NDb250YWluZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFdhaXQgZm9yIGxpc3RpbmdzIGNvbnRhaW5lciB3aXRoIG11bHRpcGxlIHNlbGVjdG9yIGF0dGVtcHRzXHJcbiAgICAgIGxldCBsaXN0aW5nc0ZvdW5kID0gZmFsc2U7XHJcbiAgICAgIGNvbnN0IHNlbGVjdG9ycyA9IFtcclxuICAgICAgICAnI2xpc3RpbmdzLWNvbnRhaW5lcicsXHJcbiAgICAgICAgJ1tkYXRhLXRlc3RpZD1cImxpc3RpbmdzLWNvbnRhaW5lclwiXScsXHJcbiAgICAgICAgJy5saXN0aW5nLWNvbnRhaW5lcicsXHJcbiAgICAgICAgJ1tkYXRhLXRlc3RpZD1cImV2ZW50LWxpc3RpbmdzXCJdJ1xyXG4gICAgICBdO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coJ1dhaXRpbmcgZm9yIGxpc3RpbmdzIGNvbnRhaW5lciB0byBiZSB2aXNpYmxlLi4uJyk7XHJcbiAgICAgIGZvciAoY29uc3Qgc2VsZWN0b3Igb2Ygc2VsZWN0b3JzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGF3YWl0IHBhZ2Uud2FpdEZvclNlbGVjdG9yKHNlbGVjdG9yLCB7IFxyXG4gICAgICAgICAgICB0aW1lb3V0OiA1MDAwLFxyXG4gICAgICAgICAgICB2aXNpYmxlOiB0cnVlIFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhgRm91bmQgbGlzdGluZ3MgY29udGFpbmVyIHdpdGggc2VsZWN0b3I6ICR7c2VsZWN0b3J9YCk7XHJcbiAgICAgICAgICBsaXN0aW5nc0ZvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhgU2VsZWN0b3IgJHtzZWxlY3Rvcn0gbm90IGZvdW5kLCB0cnlpbmcgbmV4dC4uLmApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCFsaXN0aW5nc0ZvdW5kKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignQ291bGQgbm90IGZpbmQgbGlzdGluZ3MgY29udGFpbmVyIHdpdGggYW55IGtub3duIHNlbGVjdG9yJyk7XHJcbiAgICAgICAgYXdhaXQgcGFnZS5zY3JlZW5zaG90KHsgcGF0aDogJ2xpc3RpbmdzLWVycm9yLnBuZycsIGZ1bGxQYWdlOiB0cnVlIH0pO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTGlzdGluZ3MgY29udGFpbmVyIG5vdCBmb3VuZCBhZnRlciBhbGwgYXR0ZW1wdHMnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gV2FpdCBmb3IgYWN0dWFsIHRpY2tldCBsaXN0aW5ncyB0byBsb2FkIHdpdGggc2hvcnRlciB0aW1lb3V0XHJcbiAgICAgIGF3YWl0IHBhZ2Uud2FpdEZvckZ1bmN0aW9uKCgpID0+IHtcclxuICAgICAgICBjb25zdCBsaXN0aW5ncyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWxpc3RpbmctaWRdJyk7XHJcbiAgICAgICAgcmV0dXJuIGxpc3RpbmdzLmxlbmd0aCA+IDA7XHJcbiAgICAgIH0sIHsgdGltZW91dDogMTAwMDAgfSk7XHJcblxyXG4gICAgICAvLyBBZGRpdGlvbmFsIGRlbGF5IHRvIGVuc3VyZSBhbGwgZHluYW1pYyBjb250ZW50IGlzIGxvYWRlZFxyXG4gICAgICBhd2FpdCBwYWdlLndhaXRGb3JUaW1lb3V0KDEwMDApO1xyXG5cclxuICAgICAgY29uc3QgdGlja2V0cyA9IGF3YWl0IHBhZ2UuZXZhbHVhdGUoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGxpc3RpbmdzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1saXN0aW5nLWlkXScpKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhgUHJvY2Vzc2luZyAke2xpc3RpbmdzLmxlbmd0aH0gbGlzdGluZ3NgKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB0aWNrZXRzQnlTZWN0aW9uID0ge307XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGlzdGluZ3MuZm9yRWFjaCgobGlzdGluZywgaW5kZXgpID0+IHtcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFNraXAgc29sZCB0aWNrZXRzXHJcbiAgICAgICAgICAgIGlmIChsaXN0aW5nLmdldEF0dHJpYnV0ZSgnZGF0YS1pcy1zb2xkJykgPT09ICcxJykgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgLy8gR2V0IHNlY3Rpb24gbmFtZSB3aXRoIG11bHRpcGxlIHNlbGVjdG9yIGF0dGVtcHRzXHJcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb24gPSBsaXN0aW5nLnF1ZXJ5U2VsZWN0b3IoJy5zYy1obGFsZ2YtNicpPy50ZXh0Q29udGVudD8udHJpbSgpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RpbmcucXVlcnlTZWxlY3RvcignW2RhdGEtdGVzdGlkPVwic2VjdGlvbi1uYW1lXCJdJyk/LnRleHRDb250ZW50Py50cmltKCkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGluZy5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hdXRvPVwibGlzdGluZy1zZWN0aW9uXCJdJyk/LnRleHRDb250ZW50Py50cmltKCkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0dlbmVyYWwgQWRtaXNzaW9uJztcclxuXHJcbiAgICAgICAgICAgIC8vIEdldCBwcmljZSB3aXRoIG11bHRpcGxlIHNlbGVjdG9yIGF0dGVtcHRzXHJcbiAgICAgICAgICAgIGNvbnN0IHByaWNlRWxlbWVudCA9IGxpc3RpbmcucXVlcnlTZWxlY3RvcignW2RhdGEtdGVzdGlkPVwibGlzdGluZy1wcmljZVwiXScpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGluZy5xdWVyeVNlbGVjdG9yKCcuc2MtaGxhbGdmLTEnKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RpbmcucXVlcnlTZWxlY3RvcignW2RhdGEtYXV0bz1cImxpc3RpbmctcHJpY2VcIl0nKTtcclxuICAgICAgICAgICAgY29uc3QgcHJpY2UgPSBwcmljZUVsZW1lbnQ/LnRleHRDb250ZW50Py50cmltKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBHZXQgcXVhbnRpdHkgd2l0aCBtdWx0aXBsZSBzZWxlY3RvciBhdHRlbXB0c1xyXG4gICAgICAgICAgICBjb25zdCBxdWFudGl0eSA9IGxpc3RpbmcucXVlcnlTZWxlY3RvcignLnNjLWhsYWxnZi0xNCcpPy50ZXh0Q29udGVudD8udHJpbSgpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0aW5nLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXRlc3RpZD1cInF1YW50aXR5XCJdJyk/LnRleHRDb250ZW50Py50cmltKCkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RpbmcucXVlcnlTZWxlY3RvcignW2RhdGEtYXV0bz1cImxpc3RpbmctcXVhbnRpdHlcIl0nKT8udGV4dENvbnRlbnQ/LnRyaW0oKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghcHJpY2UpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGlja2V0c0J5U2VjdGlvbltzZWN0aW9uXSkge1xyXG4gICAgICAgICAgICAgIHRpY2tldHNCeVNlY3Rpb25bc2VjdGlvbl0gPSB7XHJcbiAgICAgICAgICAgICAgICBzZWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgdGlja2V0czogW10sXHJcbiAgICAgICAgICAgICAgICBsb3dlc3RQcmljZTogSW5maW5pdHksXHJcbiAgICAgICAgICAgICAgICBoaWdoZXN0UHJpY2U6IC1JbmZpbml0eSxcclxuICAgICAgICAgICAgICAgIG51bWJlck9mTGlzdGluZ3M6IDBcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBudW1lcmljUHJpY2UgPSBwYXJzZUZsb2F0KHByaWNlLnJlcGxhY2UoL1teMC05Ll0vZywgJycpKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHRpY2tldEluZm8gPSB7XHJcbiAgICAgICAgICAgICAgcXVhbnRpdHksXHJcbiAgICAgICAgICAgICAgcHJpY2UsXHJcbiAgICAgICAgICAgICAgcmF3UHJpY2U6IG51bWVyaWNQcmljZSxcclxuICAgICAgICAgICAgICBsaXN0aW5nVXJsOiB3aW5kb3cubG9jYXRpb24uaHJlZixcclxuICAgICAgICAgICAgICBsaXN0aW5nSWQ6IGxpc3RpbmcuZ2V0QXR0cmlidXRlKCdkYXRhLWxpc3RpbmctaWQnKVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGlja2V0c0J5U2VjdGlvbltzZWN0aW9uXS50aWNrZXRzLnB1c2godGlja2V0SW5mbyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIWlzTmFOKG51bWVyaWNQcmljZSkpIHtcclxuICAgICAgICAgICAgICB0aWNrZXRzQnlTZWN0aW9uW3NlY3Rpb25dLmxvd2VzdFByaWNlID0gTWF0aC5taW4odGlja2V0c0J5U2VjdGlvbltzZWN0aW9uXS5sb3dlc3RQcmljZSwgbnVtZXJpY1ByaWNlKTtcclxuICAgICAgICAgICAgICB0aWNrZXRzQnlTZWN0aW9uW3NlY3Rpb25dLmhpZ2hlc3RQcmljZSA9IE1hdGgubWF4KHRpY2tldHNCeVNlY3Rpb25bc2VjdGlvbl0uaGlnaGVzdFByaWNlLCBudW1lcmljUHJpY2UpO1xyXG4gICAgICAgICAgICAgIHRpY2tldHNCeVNlY3Rpb25bc2VjdGlvbl0ubnVtYmVyT2ZMaXN0aW5ncysrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYEVycm9yIHByb2Nlc3NpbmcgbGlzdGluZyAke2luZGV4fTpgLCBlcnIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBPYmplY3QudmFsdWVzKHRpY2tldHNCeVNlY3Rpb24pLmZvckVhY2goc2VjdGlvbiA9PiB7XHJcbiAgICAgICAgICBpZiAoc2VjdGlvbi5sb3dlc3RQcmljZSA9PT0gSW5maW5pdHkpIHNlY3Rpb24ubG93ZXN0UHJpY2UgPSBudWxsO1xyXG4gICAgICAgICAgaWYgKHNlY3Rpb24uaGlnaGVzdFByaWNlID09PSAtSW5maW5pdHkpIHNlY3Rpb24uaGlnaGVzdFByaWNlID0gbnVsbDtcclxuICAgICAgICAgIHNlY3Rpb24udGlja2V0cy5zb3J0KChhLCBiKSA9PiAoYS5yYXdQcmljZSB8fCBJbmZpbml0eSkgLSAoYi5yYXdQcmljZSB8fCBJbmZpbml0eSkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgdG90YWxTZWN0aW9uczogT2JqZWN0LmtleXModGlja2V0c0J5U2VjdGlvbikubGVuZ3RoLFxyXG4gICAgICAgICAgc2VjdGlvbnM6IE9iamVjdC52YWx1ZXModGlja2V0c0J5U2VjdGlvbilcclxuICAgICAgICB9O1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKGBGb3VuZCB0aWNrZXRzIGluICR7dGlja2V0cy50b3RhbFNlY3Rpb25zfSBzZWN0aW9uc2ApO1xyXG4gICAgICByZXR1cm4gdGlja2V0cztcclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB0aWNrZXQgcHJpY2VzOicsIGVycm9yKTtcclxuICAgICAgaWYgKHBhZ2UpIHtcclxuICAgICAgICBhd2FpdCBwYWdlLnNjcmVlbnNob3QoeyBwYXRoOiAnZXJyb3Itc3RhdGUucG5nJywgZnVsbFBhZ2U6IHRydWUgfSk7XHJcbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHBhZ2UuY29udGVudCgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdQYWdlIGNvbnRlbnQgYXQgZXJyb3I6JywgY29udGVudC5zdWJzdHJpbmcoMCwgNTAwKSArICcuLi4nKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4geyB0b3RhbFNlY3Rpb25zOiAwLCBzZWN0aW9uczogW10gfTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIGlmIChicm93c2VyICYmICFleGlzdGluZ1BhZ2UpIHtcclxuICAgICAgICBhd2FpdCBicm93c2VyLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIHNlYXJjaENvbmNlcnRzKGFydGlzdCwgdmVudWUsIGxvY2F0aW9uKSB7XHJcbiAgICBjb25zdCBicm93c2VyID0gYXdhaXQgdGhpcy5zZXR1cEJyb3dzZXIoKTtcclxuICAgIGxldCBzZWFyY2hQYWdlO1xyXG4gICAgbGV0IGV2ZW50UGFnZTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBzZWFyY2hQYWdlID0gYXdhaXQgdGhpcy5zZXR1cFBhZ2UoYnJvd3Nlcik7XHJcbiAgICAgIGNvbnN0IHNlYXJjaFVybCA9IHRoaXMuZ2VuZXJhdGVTZWFyY2hVcmwoYXJ0aXN0LCB2ZW51ZSwgbG9jYXRpb24pO1xyXG4gICAgICBjb25zb2xlLmxvZygnU2VhcmNoaW5nIFN0dWJIdWI6Jywgc2VhcmNoVXJsKTtcclxuXHJcbiAgICAgIGF3YWl0IHNlYXJjaFBhZ2UuZ290byhzZWFyY2hVcmwsIHsgd2FpdFVudGlsOiAnbmV0d29ya2lkbGUwJywgdGltZW91dDogMzAwMDAgfSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdQYWdlIGxvYWRlZCwgY2hlY2tpbmcgY29udGVudC4uLicpO1xyXG5cclxuICAgICAgYXdhaXQgc2VhcmNoUGFnZS53YWl0Rm9yVGltZW91dCgyMDAwKTtcclxuICAgICAgbGV0IGNvbnRlbnQgPSBhd2FpdCBzZWFyY2hQYWdlLmNvbnRlbnQoKTtcclxuXHJcbiAgICAgIGlmICghY29udGVudC5pbmNsdWRlcygnZGF0YS10ZXN0aWQ9XCJwcmltYXJ5R3JpZFwiJykpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnUmVsb2FkaW5nIHBhZ2UgZHVlIHRvIG1pc3NpbmcgY29udGVudC4uLicpO1xyXG4gICAgICAgIGF3YWl0IHNlYXJjaFBhZ2UucmVsb2FkKHsgd2FpdFVudGlsOiAnZG9tY29udGVudGxvYWRlZCcgfSk7XHJcbiAgICAgICAgYXdhaXQgc2VhcmNoUGFnZS53YWl0Rm9yVGltZW91dCgzMDAwKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc29sZS5sb2coJ1dhaXRpbmcgZm9yIHByaW1hcnkgZ3JpZC4uLicpO1xyXG4gICAgICBhd2FpdCBzZWFyY2hQYWdlLndhaXRGb3JTZWxlY3RvcignW2RhdGEtdGVzdGlkPVwicHJpbWFyeUdyaWRcIl0nKTtcclxuICAgICAgY29uc29sZS5sb2coJ0ZvdW5kIHByaW1hcnkgZ3JpZCwgZXh0cmFjdGluZyBldmVudHMuLi4nKTtcclxuXHJcbiAgICAgIGF3YWl0IHNlYXJjaFBhZ2Uud2FpdEZvclRpbWVvdXQoMjAwMCk7XHJcblxyXG4gICAgICBjb25zdCBldmVudHMgPSBhd2FpdCB0aGlzLmV4dHJhY3RFdmVudERldGFpbHMoc2VhcmNoUGFnZSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBcXG5SYXcgZXZlbnRzIGV4dHJhY3RlZDogJHtldmVudHMubGVuZ3RofWApO1xyXG5cclxuICAgICAgY29uc3QgbWF0Y2hpbmdFdmVudHMgPSBldmVudHMuZmlsdGVyKGV2ZW50ID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnQ2hlY2tpbmcgZXZlbnQ6JywgZXZlbnQubmFtZSk7XHJcbiAgICAgICAgY29uc3QgdGl0bGVNYXRjaCA9ICFhcnRpc3QgfHwgZXZlbnQubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGFydGlzdC50b0xvd2VyQ2FzZSgpKTtcclxuICAgICAgICBjb25zdCB2ZW51ZU1hdGNoID0gIXZlbnVlIHx8IGV2ZW50LnZlbnVlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModmVudWUudG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgICAgY29uc3QgbG9jYXRpb25NYXRjaCA9ICFsb2NhdGlvbiB8fCBldmVudC5sb2NhdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvY2F0aW9uLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdNYXRjaCByZXN1bHRzOicsIHsgdGl0bGVNYXRjaCwgdmVudWVNYXRjaCwgbG9jYXRpb25NYXRjaCB9KTtcclxuICAgICAgICByZXR1cm4gdGl0bGVNYXRjaCAmJiB2ZW51ZU1hdGNoICYmIGxvY2F0aW9uTWF0Y2g7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coJ0ZvdW5kIG1hdGNoaW5nIGV2ZW50czonLCBtYXRjaGluZ0V2ZW50cy5sZW5ndGgpO1xyXG5cclxuICAgICAgY29uc3QgZXZlbnRzV2l0aFRpY2tldHMgPSBbXTtcclxuICAgICAgZm9yIChjb25zdCBldmVudCBvZiBtYXRjaGluZ0V2ZW50cykge1xyXG4gICAgICAgIGNvbnN0IHsgc3VjY2VzcywgcGFnZTogbmV3UGFnZSB9ID0gYXdhaXQgdGhpcy5uYXZpZ2F0ZVRvRXZlbnQoc2VhcmNoUGFnZSwgZXZlbnQpO1xyXG4gICAgICAgIGlmIChzdWNjZXNzICYmIG5ld1BhZ2UpIHtcclxuICAgICAgICAgIGV2ZW50UGFnZSA9IG5ld1BhZ2U7XHJcbiAgICAgICAgICBjb25zdCB0aWNrZXRzID0gYXdhaXQgdGhpcy5nZXRUaWNrZXRQcmljZXMoZXZlbnQubGluaywgZXZlbnRQYWdlKTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdTY3JhcGVkIFRpY2tldHM6JywgSlNPTi5zdHJpbmdpZnkodGlja2V0cywgbnVsbCwgMikpO1xyXG5cclxuICAgICAgICAgIGV2ZW50c1dpdGhUaWNrZXRzLnB1c2goe1xyXG4gICAgICAgICAgICBuYW1lOiBldmVudC5uYW1lLFxyXG4gICAgICAgICAgICBkYXRlOiBldmVudC5kYXRlLFxyXG4gICAgICAgICAgICB2ZW51ZTogZXZlbnQudmVudWUsXHJcbiAgICAgICAgICAgIGxvY2F0aW9uOiBldmVudC5sb2NhdGlvbixcclxuICAgICAgICAgICAgY2F0ZWdvcnk6IGV2ZW50LmNhdGVnb3J5LFxyXG4gICAgICAgICAgICBsaW5rOiBldmVudC5saW5rLFxyXG4gICAgICAgICAgICBzb3VyY2U6IGV2ZW50LnNvdXJjZSxcclxuICAgICAgICAgICAgdGlja2V0czogdGlja2V0c1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgYXdhaXQgZXZlbnRQYWdlLmNsb3NlKCk7XHJcbiAgICAgICAgICBhd2FpdCBzZWFyY2hQYWdlLndhaXRGb3JUaW1lb3V0KDEwMDApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGV2ZW50c1dpdGhUaWNrZXRzO1xyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1NlYXJjaCBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgIGlmIChzZWFyY2hQYWdlKSB7XHJcbiAgICAgICAgYXdhaXQgc2VhcmNoUGFnZS5zY3JlZW5zaG90KHsgcGF0aDogJ2Vycm9yLnBuZycsIGZ1bGxQYWdlOiB0cnVlIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIGlmIChldmVudFBhZ2UgJiYgIWV2ZW50UGFnZS5pc0Nsb3NlZCgpKSBhd2FpdCBldmVudFBhZ2UuY2xvc2UoKTtcclxuICAgICAgaWYgKHNlYXJjaFBhZ2UgJiYgIXNlYXJjaFBhZ2UuaXNDbG9zZWQoKSkgYXdhaXQgc2VhcmNoUGFnZS5jbG9zZSgpO1xyXG4gICAgICBpZiAoYnJvd3NlcikgYXdhaXQgYnJvd3Nlci5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gVXBkYXRlZCBleHRyYWN0RXZlbnREZXRhaWxzIG1ldGhvZFxyXG4gIGFzeW5jIGV4dHJhY3RFdmVudERldGFpbHMocGFnZSkge1xyXG4gICAgY29uc29sZS5sb2coJ1N0YXJ0aW5nIGV2ZW50IGV4dHJhY3Rpb24gaW4gTm9kZScpO1xyXG4gICAgXHJcbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgcGFnZS5ldmFsdWF0ZSgoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSB7IGxvZ3M6IFtdLCBldmVudHM6IFtdIH07XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBldmVudENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXRlc3RpZD1cInByaW1hcnlHcmlkXCJdJyk7XHJcbiAgICAgIHJlc3VsdHMubG9ncy5wdXNoKGBGb3VuZCBjb250YWluZXI6ICR7ISFldmVudENvbnRhaW5lcn1gKTtcclxuICAgICAgXHJcbiAgICAgIGlmICghZXZlbnRDb250YWluZXIpIHtcclxuICAgICAgICByZXN1bHRzLmxvZ3MucHVzaCgnTm8gZXZlbnQgY29udGFpbmVyIGZvdW5kJyk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGxpc3RJdGVtcyA9IEFycmF5LmZyb20oZXZlbnRDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnbGknKSkuc2xpY2UoMSk7XHJcbiAgICAgIHJlc3VsdHMubG9ncy5wdXNoKGBQcm9jZXNzaW5nICR7bGlzdEl0ZW1zLmxlbmd0aH0gZXZlbnQgaXRlbXNgKTtcclxuXHJcbiAgICAgIGxpc3RJdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBsaW5rID0gaXRlbS5xdWVyeVNlbGVjdG9yKCdhJyk7XHJcbiAgICAgICAgICBjb25zdCB0aXRsZU1hdGNoID0gaXRlbS50ZXh0Q29udGVudC5tYXRjaCgvKD86UE18QU0pKC4qPykoPzpCeWxpbmV8U2hlZHxUaGVhdHJlfEFyZW5hfENlbnRlcnxDb21wbGV4fEJhcnxCb3R0bGUpLyk7XHJcbiAgICAgICAgICBjb25zdCB0aXRsZSA9IHRpdGxlTWF0Y2g/LlsxXT8udHJpbSgpIHx8ICcnO1xyXG5cclxuICAgICAgICAgIGNvbnN0IHRpbWVFbGVtZW50ID0gaXRlbS5xdWVyeVNlbGVjdG9yKCd0aW1lJyk7XHJcbiAgICAgICAgICBjb25zdCBkYXRlVGV4dCA9IHRpbWVFbGVtZW50Py50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBVcGRhdGVkIHJlZ2V4IHRvIGhhbmRsZSB5ZWFyIGluIHRoZSBtaWRkbGVcclxuICAgICAgICAgIGNvbnN0IGRhdGVNYXRjaCA9IGRhdGVUZXh0Lm1hdGNoKC8oW0EtWmEtel0rKVxccysoXFxkKylcXHMrKFxcZHs0fSkoW0EtWmEtel0rKShcXGQrOlxcZCtcXHMqW0FQXU0pL2kpO1xyXG4gICAgICAgICAgbGV0IGZvcm1hdHRlZERhdGUgPSBudWxsO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoZGF0ZU1hdGNoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IFtfLCBtb250aCwgZGF5LCB5ZWFyLCBkYXlPZldlZWssIHRpbWVdID0gZGF0ZU1hdGNoO1xyXG4gICAgICAgICAgICBjb25zdCBkYXRlU3RyID0gYCR7bW9udGh9ICR7ZGF5fSAke3llYXJ9ICR7dGltZX1gO1xyXG4gICAgICAgICAgICBmb3JtYXR0ZWREYXRlID0gZGF0ZVN0cjtcclxuICAgICAgICAgICAgcmVzdWx0cy5sb2dzLnB1c2goYFBhcnNlZCBEYXRlIFN0cmluZzogJHtkYXRlU3RyfWApO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzdWx0cy5sb2dzLnB1c2goYEZhaWxlZCB0byBwYXJzZSBkYXRlIGZyb20gdGV4dDogXCIke2RhdGVUZXh0fVwiYCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgY29uc3QgdmVudWVNYXRjaCA9IGl0ZW0udGV4dENvbnRlbnQubWF0Y2goLyg/OmF0XFxzKT8oKD86QnlsaW5lfFNoZWR8VGhlYXRyZXxBcmVuYXxDZW50ZXJ8Q29tcGxleHxCYXJ8Qm90dGxlKVteLF0rKS8pO1xyXG4gICAgICAgICAgY29uc3QgdmVudWUgPSB2ZW51ZU1hdGNoPy5bMV0/LnRyaW0oKSB8fCAnJztcclxuXHJcbiAgICAgICAgICBjb25zdCBsb2NhdGlvbk1hdGNoID0gaXRlbS50ZXh0Q29udGVudC5tYXRjaCgvKFteLF0rLFxccypbQS1aXXsyfSkvKTtcclxuICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0gbG9jYXRpb25NYXRjaD8uWzFdPy50cmltKCkgfHwgJyc7XHJcblxyXG4gICAgICAgICAgLy8gU2V0IGNhdGVnb3J5XHJcbiAgICAgICAgICBjb25zdCBjYXRlZ29yeSA9ICdDb25jZXJ0JztcclxuXHJcbiAgICAgICAgICBpZiAodGl0bGUgJiYgZm9ybWF0dGVkRGF0ZSAmJiB2ZW51ZSAmJiBsb2NhdGlvbiAmJiBsaW5rPy5ocmVmKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdHMuZXZlbnRzLnB1c2goe1xyXG4gICAgICAgICAgICAgIG5hbWU6IHRpdGxlLFxyXG4gICAgICAgICAgICAgIGRhdGU6IGZvcm1hdHRlZERhdGUsXHJcbiAgICAgICAgICAgICAgdmVudWUsXHJcbiAgICAgICAgICAgICAgbG9jYXRpb24sXHJcbiAgICAgICAgICAgICAgY2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgbGluazogbGluay5ocmVmLFxyXG4gICAgICAgICAgICAgIHNvdXJjZTogJ3N0dWJodWInXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQWRkIGRlYnVnIGxvZ2dpbmcgZm9yIHN1Y2Nlc3NmdWwgZXZlbnRcclxuICAgICAgICAgICAgcmVzdWx0cy5sb2dzLnB1c2goYFN1Y2Nlc3NmdWxseSBwYXJzZWQgZXZlbnQ6ICR7dGl0bGV9IG9uICR7Zm9ybWF0dGVkRGF0ZX1gKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc3VsdHMubG9ncy5wdXNoKGBJbmNvbXBsZXRlIGRhdGEgZm9yIGV2ZW50ICR7aW5kZXggKyAxfSwgc2tpcHBpbmcgaW5zZXJ0aW9uLmApO1xyXG4gICAgICAgICAgICByZXN1bHRzLmxvZ3MucHVzaChgVGl0bGU6ICR7dGl0bGV9YCk7XHJcbiAgICAgICAgICAgIHJlc3VsdHMubG9ncy5wdXNoKGBEYXRlOiAke2Zvcm1hdHRlZERhdGV9YCk7XHJcbiAgICAgICAgICAgIHJlc3VsdHMubG9ncy5wdXNoKGBWZW51ZTogJHt2ZW51ZX1gKTtcclxuICAgICAgICAgICAgcmVzdWx0cy5sb2dzLnB1c2goYExvY2F0aW9uOiAke2xvY2F0aW9ufWApO1xyXG4gICAgICAgICAgICByZXN1bHRzLmxvZ3MucHVzaChgSGFzIGxpbms6ICR7ISFsaW5rPy5ocmVmfWApO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIERlYnVnIGxvZ2dpbmdcclxuICAgICAgICAgIHJlc3VsdHMubG9ncy5wdXNoKGBcXG5MaXN0IEl0ZW0gJHtpbmRleCArIDF9OmApO1xyXG4gICAgICAgICAgcmVzdWx0cy5sb2dzLnB1c2goYE5hbWU6ICR7dGl0bGV9YCk7XHJcbiAgICAgICAgICByZXN1bHRzLmxvZ3MucHVzaChgRGF0ZTogJHtmb3JtYXR0ZWREYXRlfWApO1xyXG4gICAgICAgICAgcmVzdWx0cy5sb2dzLnB1c2goYE9yaWdpbmFsIERhdGUgVGV4dDogJHtkYXRlVGV4dH1gKTtcclxuICAgICAgICAgIHJlc3VsdHMubG9ncy5wdXNoKGBWZW51ZTogJHt2ZW51ZX1gKTtcclxuICAgICAgICAgIHJlc3VsdHMubG9ncy5wdXNoKGBMb2NhdGlvbjogJHtsb2NhdGlvbn1gKTtcclxuICAgICAgICAgIHJlc3VsdHMubG9ncy5wdXNoKGBDYXRlZ29yeTogJHtjYXRlZ29yeX1gKTtcclxuICAgICAgICAgIHJlc3VsdHMubG9ncy5wdXNoKGBIYXMgbGluazogJHshIWxpbms/LmhyZWZ9YCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICByZXN1bHRzLmxvZ3MucHVzaChgRXJyb3IgcHJvY2Vzc2luZyBpdGVtICR7aW5kZXggKyAxfTogJHtlcnIubWVzc2FnZX1gKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBMb2cgZGVidWcgaW5mb3JtYXRpb25cclxuICAgIHJlc3VsdHMubG9ncy5mb3JFYWNoKGxvZyA9PiBjb25zb2xlLmxvZyhsb2cpKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHJlc3VsdHMuZXZlbnRzO1xyXG4gIH1cclxuXHJcbiAgLy8gbmF2aWdhdGVUb0V2ZW50IHJlbWFpbnMgdW5jaGFuZ2VkXHJcbiAgYXN5bmMgbmF2aWdhdGVUb0V2ZW50KHBhZ2UsIGV2ZW50KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnQXR0ZW1wdGluZyB0byBuYXZpZ2F0ZSB0byBldmVudDonLCBldmVudC5uYW1lKTtcclxuICAgICAgY29uc3QgY29udGFpbmVyU2VsZWN0b3IgPSAnW2RhdGEtdGVzdGlkPVwicHJpbWFyeUdyaWRcIl0nO1xyXG4gICAgICBhd2FpdCBwYWdlLndhaXRGb3JTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdGb3VuZCBldmVudCBjb250YWluZXInKTtcclxuXHJcbiAgICAgIC8vIEdldCBhbGwgZXZlbnQgbGlua3NcclxuICAgICAgY29uc3QgZXZlbnRMaW5rcyA9IGF3YWl0IHBhZ2UuJCQoYCR7Y29udGFpbmVyU2VsZWN0b3J9IGFbaHJlZio9XCIvZXZlbnQvXCJdYCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdGb3VuZCBldmVudCBsaW5rczonLCBldmVudExpbmtzLmxlbmd0aCk7XHJcbiAgICAgIFxyXG4gICAgICBmb3IgKGNvbnN0IGxpbmsgb2YgZXZlbnRMaW5rcykge1xyXG4gICAgICAgIGNvbnN0IGxpbmtDb250ZW50ID0gYXdhaXQgbGluay5ldmFsdWF0ZShlbCA9PiB7XHJcbiAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0ZXh0OiBlbC50ZXh0Q29udGVudC5yZXBsYWNlKC9cXHMrL2csICcgJykudHJpbSgpLFxyXG4gICAgICAgICAgICBocmVmOiBlbC5ocmVmXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdDaGVja2luZyBsaW5rOicsIGxpbmtDb250ZW50KTtcclxuXHJcbiAgICAgICAgaWYgKGxpbmtDb250ZW50LnRleHQuaW5jbHVkZXMoZXZlbnQubmFtZSkpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdGb3VuZCBtYXRjaGluZyBldmVudCwgY2xpY2tpbmcgbGluaycpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBDcmVhdGUgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiBhIG5ldyBwYWdlIGlzIGNyZWF0ZWRcclxuICAgICAgICAgIGNvbnN0IG5ld1BhZ2VQcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBcclxuICAgICAgICAgICAgcGFnZS5icm93c2VyKCkub25jZSgndGFyZ2V0Y3JlYXRlZCcsIGFzeW5jIHRhcmdldCA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc3QgbmV3UGFnZSA9IGF3YWl0IHRhcmdldC5wYWdlKCk7XHJcbiAgICAgICAgICAgICAgcmVzb2x2ZShuZXdQYWdlKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgLy8gQ2xpY2sgdGhlIGxpbmtcclxuICAgICAgICAgIGF3YWl0IGxpbmsuY2xpY2soKTtcclxuXHJcbiAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgbmV3IHBhZ2UgdG8gb3BlblxyXG4gICAgICAgICAgY29uc3QgbmV3UGFnZSA9IGF3YWl0IG5ld1BhZ2VQcm9taXNlO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ05ldyBwYWdlIG9wZW5lZCcpO1xyXG5cclxuICAgICAgICAgIC8vIFdhaXQgZm9yIHRoZSBsaXN0aW5ncyBjb250YWluZXIgaW4gdGhlIG5ldyBwYWdlXHJcbiAgICAgICAgICBhd2FpdCBuZXdQYWdlLndhaXRGb3JTZWxlY3RvcignI2xpc3RpbmdzLWNvbnRhaW5lcicsIHsgdGltZW91dDogNjAwMDAgfSk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnRXZlbnQgcGFnZSBsb2FkZWQnKTtcclxuXHJcbiAgICAgICAgICAvLyBSZXR1cm4gYm90aCBzdWNjZXNzIHN0YXR1cyBhbmQgdGhlIG5ldyBwYWdlXHJcbiAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBwYWdlOiBuZXdQYWdlIH07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhgQ291bGQgbm90IGZpbmQgZXZlbnQgd2l0aCBuYW1lOiAke2V2ZW50Lm5hbWV9YCk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBwYWdlOiBudWxsIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdOYXZpZ2F0aW9uIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIHBhZ2U6IG51bGwgfTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFN0dWJIdWJTZWFyY2hlcjsiXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50IiwiY29uZmlnIiwic2V0dXBCcm93c2VyIiwic2V0dXBQYWdlIiwicGFyc2UiLCJzdXBhYmFzZUNsaWVudCIsInN1cGFiYXNlIiwidXJsIiwic2VydmljZUtleSIsIlN0dWJIdWJTZWFyY2hlciIsImNvbnN0cnVjdG9yIiwiYmFzZVVybCIsImdlbmVyYXRlU2VhcmNoVXJsIiwiYXJ0aXN0IiwidmVudWUiLCJsb2NhdGlvbiIsInNlYXJjaFBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsInNlYXJjaFRlcm1zIiwiZmlsdGVyIiwiQm9vbGVhbiIsImFwcGVuZCIsImpvaW4iLCJ0b1N0cmluZyIsImJyb3dzZXIiLCJnZXRUaWNrZXRQcmljZXMiLCJldmVudFVybCIsImV4aXN0aW5nUGFnZSIsInBhZ2UiLCJjb25zb2xlIiwibG9nIiwiZ290byIsIndhaXRVbnRpbCIsInRpbWVvdXQiLCJjaGVja0xpc3RpbmdzQ29udGFpbmVyIiwiY29udGVudCIsImluY2x1ZGVzIiwiaGFzTGlzdGluZ3MiLCJQcm9taXNlIiwicmFjZSIsInJlbG9hZCIsIl8iLCJyZWplY3QiLCJzZXRUaW1lb3V0IiwiRXJyb3IiLCJ3YWl0Rm9yVGltZW91dCIsInJlbG9hZEVycm9yIiwibWVzc2FnZSIsImxpc3RpbmdzRm91bmQiLCJzZWxlY3RvcnMiLCJzZWxlY3RvciIsIndhaXRGb3JTZWxlY3RvciIsInZpc2libGUiLCJlcnJvciIsInNjcmVlbnNob3QiLCJwYXRoIiwiZnVsbFBhZ2UiLCJ3YWl0Rm9yRnVuY3Rpb24iLCJsaXN0aW5ncyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImxlbmd0aCIsInRpY2tldHMiLCJldmFsdWF0ZSIsIkFycmF5IiwiZnJvbSIsInRpY2tldHNCeVNlY3Rpb24iLCJmb3JFYWNoIiwibGlzdGluZyIsImluZGV4IiwiZ2V0QXR0cmlidXRlIiwic2VjdGlvbiIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsInRyaW0iLCJwcmljZUVsZW1lbnQiLCJwcmljZSIsInF1YW50aXR5IiwibG93ZXN0UHJpY2UiLCJJbmZpbml0eSIsImhpZ2hlc3RQcmljZSIsIm51bWJlck9mTGlzdGluZ3MiLCJudW1lcmljUHJpY2UiLCJwYXJzZUZsb2F0IiwicmVwbGFjZSIsInRpY2tldEluZm8iLCJyYXdQcmljZSIsImxpc3RpbmdVcmwiLCJ3aW5kb3ciLCJocmVmIiwibGlzdGluZ0lkIiwicHVzaCIsImlzTmFOIiwiTWF0aCIsIm1pbiIsIm1heCIsImVyciIsIk9iamVjdCIsInZhbHVlcyIsInNvcnQiLCJhIiwiYiIsInRvdGFsU2VjdGlvbnMiLCJrZXlzIiwic2VjdGlvbnMiLCJzdWJzdHJpbmciLCJjbG9zZSIsInNlYXJjaENvbmNlcnRzIiwic2VhcmNoUGFnZSIsImV2ZW50UGFnZSIsInNlYXJjaFVybCIsImV2ZW50cyIsImV4dHJhY3RFdmVudERldGFpbHMiLCJtYXRjaGluZ0V2ZW50cyIsImV2ZW50IiwibmFtZSIsInRpdGxlTWF0Y2giLCJ0b0xvd2VyQ2FzZSIsInZlbnVlTWF0Y2giLCJsb2NhdGlvbk1hdGNoIiwiZXZlbnRzV2l0aFRpY2tldHMiLCJzdWNjZXNzIiwibmV3UGFnZSIsIm5hdmlnYXRlVG9FdmVudCIsImxpbmsiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0ZSIsImNhdGVnb3J5Iiwic291cmNlIiwiaXNDbG9zZWQiLCJyZXN1bHRzIiwibG9ncyIsImV2ZW50Q29udGFpbmVyIiwibGlzdEl0ZW1zIiwic2xpY2UiLCJpdGVtIiwibWF0Y2giLCJ0aXRsZSIsInRpbWVFbGVtZW50IiwiZGF0ZVRleHQiLCJkYXRlTWF0Y2giLCJmb3JtYXR0ZWREYXRlIiwibW9udGgiLCJkYXkiLCJ5ZWFyIiwiZGF5T2ZXZWVrIiwidGltZSIsImRhdGVTdHIiLCJjb250YWluZXJTZWxlY3RvciIsImV2ZW50TGlua3MiLCIkJCIsImxpbmtDb250ZW50IiwiZWwiLCJ0ZXh0IiwibmV3UGFnZVByb21pc2UiLCJyZXNvbHZlIiwib25jZSIsInRhcmdldCIsImNsaWNrIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/stub-hub.js\n");

/***/ }),

/***/ "(api)/./src/utils.js":
/*!**********************!*\
  !*** ./src/utils.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formatPrice: () => (/* binding */ formatPrice),\n/* harmony export */   setupBrowser: () => (/* binding */ setupBrowser),\n/* harmony export */   setupPage: () => (/* binding */ setupPage)\n/* harmony export */ });\n/* harmony import */ var puppeteer_extra__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! puppeteer-extra */ \"puppeteer-extra\");\n/* harmony import */ var puppeteer_extra__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(puppeteer_extra__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var puppeteer_extra_plugin_stealth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! puppeteer-extra-plugin-stealth */ \"puppeteer-extra-plugin-stealth\");\n/* harmony import */ var puppeteer_extra_plugin_stealth__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(puppeteer_extra_plugin_stealth__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var puppeteer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! puppeteer */ \"puppeteer\");\n/* harmony import */ var puppeteer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(puppeteer__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\npuppeteer_extra__WEBPACK_IMPORTED_MODULE_0___default().use(puppeteer_extra_plugin_stealth__WEBPACK_IMPORTED_MODULE_1___default()());\nasync function setupBrowser() {\n    return await puppeteer_extra__WEBPACK_IMPORTED_MODULE_0___default().launch({\n        headless: false,\n        executablePath: (0,puppeteer__WEBPACK_IMPORTED_MODULE_2__.executablePath)(),\n        args: [\n            \"--no-sandbox\",\n            \"--disable-setuid-sandbox\",\n            \"--disable-blink-features=AutomationControlled\",\n            \"--window-size=1920,1080\",\n            \"--disable-features=site-per-process\",\n            \"--disable-web-security\"\n        ],\n        defaultViewport: {\n            width: 1920,\n            height: 1080\n        }\n    });\n}\nasync function setupPage(browser) {\n    const page = await browser.newPage();\n    await page.setExtraHTTPHeaders({\n        \"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8\",\n        \"Accept-Language\": \"en-US,en;q=0.9\",\n        \"Accept-Encoding\": \"gzip, deflate, br\",\n        \"Connection\": \"keep-alive\"\n    });\n    await page.setUserAgent(\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36\");\n    return page;\n}\nfunction formatPrice(price) {\n    if (typeof price === \"string\") {\n        return parseFloat(price.replace(/[^0-9.]/g, \"\"));\n    }\n    return price;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvdXRpbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXdDO0FBQ21CO0FBQ2hCO0FBRTNDQSwwREFBYSxDQUFDQyxxRUFBYUE7QUFFM0IsZUFBZUc7SUFDYixPQUFPLE1BQU1KLDZEQUFnQixDQUFDO1FBQzVCTSxVQUFVO1FBQ1ZKLGdCQUFnQkEseURBQWNBO1FBQzlCSyxNQUFNO1lBQ0o7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1NBQ0Q7UUFDREMsaUJBQWlCO1lBQUVDLE9BQU87WUFBTUMsUUFBUTtRQUFLO0lBQy9DO0FBQ0Y7QUFFQSxlQUFlQyxVQUFVQyxPQUFPO0lBQzlCLE1BQU1DLE9BQU8sTUFBTUQsUUFBUUUsT0FBTztJQUVsQyxNQUFNRCxLQUFLRSxtQkFBbUIsQ0FBQztRQUM3QixVQUFVO1FBQ1YsbUJBQW1CO1FBQ25CLG1CQUFtQjtRQUNuQixjQUFjO0lBQ2hCO0lBRUEsTUFBTUYsS0FBS0csWUFBWSxDQUFDO0lBRXhCLE9BQU9IO0FBQ1Q7QUFFQSxTQUFTSSxZQUFZQyxLQUFLO0lBQ3hCLElBQUksT0FBT0EsVUFBVSxVQUFVO1FBQzdCLE9BQU9DLFdBQVdELE1BQU1FLE9BQU8sQ0FBQyxZQUFZO0lBQzlDO0lBQ0EsT0FBT0Y7QUFDVDtBQU1FIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGlja2V0LXNlYXJjaGVyLy4vc3JjL3V0aWxzLmpzPzVkODAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHB1cHBldGVlciBmcm9tICdwdXBwZXRlZXItZXh0cmEnO1xyXG5pbXBvcnQgU3RlYWx0aFBsdWdpbiBmcm9tICdwdXBwZXRlZXItZXh0cmEtcGx1Z2luLXN0ZWFsdGgnO1xyXG5pbXBvcnQgeyBleGVjdXRhYmxlUGF0aCB9IGZyb20gJ3B1cHBldGVlcic7XHJcblxyXG5wdXBwZXRlZXIudXNlKFN0ZWFsdGhQbHVnaW4oKSk7XHJcblxyXG5hc3luYyBmdW5jdGlvbiBzZXR1cEJyb3dzZXIoKSB7XHJcbiAgcmV0dXJuIGF3YWl0IHB1cHBldGVlci5sYXVuY2goe1xyXG4gICAgaGVhZGxlc3M6IGZhbHNlLFxyXG4gICAgZXhlY3V0YWJsZVBhdGg6IGV4ZWN1dGFibGVQYXRoKCksXHJcbiAgICBhcmdzOiBbXHJcbiAgICAgICctLW5vLXNhbmRib3gnLFxyXG4gICAgICAnLS1kaXNhYmxlLXNldHVpZC1zYW5kYm94JyxcclxuICAgICAgJy0tZGlzYWJsZS1ibGluay1mZWF0dXJlcz1BdXRvbWF0aW9uQ29udHJvbGxlZCcsXHJcbiAgICAgICctLXdpbmRvdy1zaXplPTE5MjAsMTA4MCcsXHJcbiAgICAgICctLWRpc2FibGUtZmVhdHVyZXM9c2l0ZS1wZXItcHJvY2VzcycsXHJcbiAgICAgICctLWRpc2FibGUtd2ViLXNlY3VyaXR5J1xyXG4gICAgXSxcclxuICAgIGRlZmF1bHRWaWV3cG9ydDogeyB3aWR0aDogMTkyMCwgaGVpZ2h0OiAxMDgwIH1cclxuICB9KTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gc2V0dXBQYWdlKGJyb3dzZXIpIHtcclxuICBjb25zdCBwYWdlID0gYXdhaXQgYnJvd3Nlci5uZXdQYWdlKCk7XHJcbiAgXHJcbiAgYXdhaXQgcGFnZS5zZXRFeHRyYUhUVFBIZWFkZXJzKHtcclxuICAgICdBY2NlcHQnOiAndGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44JyxcclxuICAgICdBY2NlcHQtTGFuZ3VhZ2UnOiAnZW4tVVMsZW47cT0wLjknLFxyXG4gICAgJ0FjY2VwdC1FbmNvZGluZyc6ICdnemlwLCBkZWZsYXRlLCBicicsXHJcbiAgICAnQ29ubmVjdGlvbic6ICdrZWVwLWFsaXZlJ1xyXG4gIH0pO1xyXG5cclxuICBhd2FpdCBwYWdlLnNldFVzZXJBZ2VudCgnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMC4wLjAuMCBTYWZhcmkvNTM3LjM2Jyk7XHJcblxyXG4gIHJldHVybiBwYWdlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmb3JtYXRQcmljZShwcmljZSkge1xyXG4gIGlmICh0eXBlb2YgcHJpY2UgPT09ICdzdHJpbmcnKSB7XHJcbiAgICByZXR1cm4gcGFyc2VGbG9hdChwcmljZS5yZXBsYWNlKC9bXjAtOS5dL2csICcnKSk7XHJcbiAgfVxyXG4gIHJldHVybiBwcmljZTtcclxufVxyXG5cclxuZXhwb3J0IHtcclxuICBzZXR1cEJyb3dzZXIsXHJcbiAgc2V0dXBQYWdlLFxyXG4gIGZvcm1hdFByaWNlXHJcbn07Il0sIm5hbWVzIjpbInB1cHBldGVlciIsIlN0ZWFsdGhQbHVnaW4iLCJleGVjdXRhYmxlUGF0aCIsInVzZSIsInNldHVwQnJvd3NlciIsImxhdW5jaCIsImhlYWRsZXNzIiwiYXJncyIsImRlZmF1bHRWaWV3cG9ydCIsIndpZHRoIiwiaGVpZ2h0Iiwic2V0dXBQYWdlIiwiYnJvd3NlciIsInBhZ2UiLCJuZXdQYWdlIiwic2V0RXh0cmFIVFRQSGVhZGVycyIsInNldFVzZXJBZ2VudCIsImZvcm1hdFByaWNlIiwicHJpY2UiLCJwYXJzZUZsb2F0IiwicmVwbGFjZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/utils.js\n");

/***/ }),

/***/ "(api)/./src/vivid-seats.js":
/*!****************************!*\
  !*** ./src/vivid-seats.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _src_config_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/config/env */ \"(api)/./src/config/env.ts\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ \"(api)/./src/utils.js\");\n/* harmony import */ var _barrel_optimize_names_parse_date_fns__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! __barrel_optimize__?names=parse!=!date-fns */ \"(api)/__barrel_optimize__?names=parse!=!./node_modules/date-fns/index.js\");\n\n\n\n\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(_src_config_env__WEBPACK_IMPORTED_MODULE_1__.config.supabase.url, _src_config_env__WEBPACK_IMPORTED_MODULE_1__.config.supabase.serviceKey);\n// Function to check if an event exists\nasync function eventExists(name, date) {\n    const { data, error } = await supabase.from(\"events\").select(\"id\").eq(\"name\", name).eq(\"date\", date).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"Error checking event existence:\", error);\n        return false;\n    }\n    return data ? true : false;\n}\n// Function to check if a link exists\nasync function linkExists(eventId, source) {\n    const { data, error } = await supabase.from(\"event_links\").select(\"id\").eq(\"event_id\", eventId).eq(\"source\", source).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"Error checking link existence:\", error);\n        return false;\n    }\n    return data ? true : false;\n}\n// Function to insert an event\nasync function insertEvent(event) {\n    const parsedDate = (0,_barrel_optimize_names_parse_date_fns__WEBPACK_IMPORTED_MODULE_3__.parse)(event.date, \"MMM d yyyy h:mm a\", new Date());\n    console.log(`Parsed Date Object: ${parsedDate} | Timestamp: ${parsedDate.getTime()}`);\n    if (isNaN(parsedDate)) {\n        console.error(\"Invalid Date object:\", event.date);\n        return null;\n    }\n    // Check if the event already exists\n    const exists = await eventExists(event.title, parsedDate.toISOString());\n    if (exists) {\n        console.log(`Event \"${event.title}\" on ${parsedDate.toISOString()} already exists. Skipping insertion.`);\n        return null;\n    }\n    const eventData = {\n        name: event.title,\n        type: event.type || \"Concert\",\n        category: event.category || \"Unknown\",\n        date: parsedDate.toISOString(),\n        venue: event.venue\n    };\n    console.log(\"Attempting to insert event:\", eventData);\n    const { data, error } = await supabase.from(\"events\").insert([\n        eventData\n    ]).select(\"id\");\n    if (error) {\n        console.error(\"Error inserting event:\", error);\n        console.error(\"Error details:\", {\n            code: error.code,\n            message: error.message,\n            details: error.details,\n            hint: error.hint\n        });\n        return null;\n    }\n    console.log(\"Successfully inserted event:\", data[0].id);\n    return data[0].id;\n}\n// Function to insert event links\nasync function insertEventLink(eventId, source, url) {\n    // Check if the link already exists to prevent duplicates\n    const exists = await linkExists(eventId, source);\n    if (exists) {\n        console.log(`Event link from ${source} already exists for event ID ${eventId}. Skipping insertion.`);\n        return;\n    }\n    const linkData = {\n        event_id: eventId,\n        source: source,\n        url: url\n    };\n    const { data, error } = await supabase.from(\"event_links\").insert([\n        linkData\n    ]);\n    if (error) {\n        console.error(`Error inserting event link (${source}):`, error);\n    } else {\n        console.log(`Inserted event link (${source}):`, data[0].id);\n    }\n}\n// Function to insert tickets\nasync function insertTickets(eventId, tickets) {\n    const formattedTickets = tickets.sections.flatMap((section)=>section.tickets.map((ticket)=>({\n                event_id: eventId,\n                price: ticket.rawPrice,\n                type: section.category,\n                section: section.section,\n                row: ticket.row || null,\n                quantity: parseInt(ticket.quantity, 10) || 1,\n                source: \"vividseats\",\n                url: ticket.listingUrl,\n                raw_data: ticket\n            })));\n    const { data, error } = await supabase.from(\"tickets\").insert(formattedTickets);\n    if (error) {\n        console.error(\"Error inserting tickets:\", error);\n    } else {\n        console.log(\"Inserted tickets:\", data.length);\n    }\n}\nasync function mainSearch(artist, venue, location) {\n    const searcher = new VividSeatsSearcher();\n    const concertsWithPrices = await searcher.searchConcerts(artist, venue, location);\n    for (const concert of concertsWithPrices){\n        const eventId = await insertEvent(concert);\n        if (eventId) {\n            // Insert event links into event_links table\n            await insertEventLink(eventId, \"vividseats\", concert.link);\n            // Insert tickets into tickets table\n            if (concert.tickets) {\n                await insertTickets(eventId, concert.tickets);\n            }\n        }\n    }\n}\n// Call mainSearch with your parameters\n// mainSearch('Cake', 'Salt Shed', 'Chicago');\nclass VividSeatsSearcher {\n    constructor(){\n        this.baseUrl = \"https://www.vividseats.com/search\";\n    }\n    generateSearchUrl(artist, venue, location) {\n        const searchParams = new URLSearchParams();\n        let searchTerms = [];\n        if (artist) searchTerms.push(artist);\n        if (location) searchTerms.push(location);\n        searchParams.append(\"searchTerm\", searchTerms.join(\" \"));\n        return `${this.baseUrl}?${searchParams.toString()}`;\n    }\n    // ... existing methods including getTicketPrices and searchConcerts ...\n    async searchConcerts(artist, venue, location) {\n        const browser = await (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.setupBrowser)();\n        let searchPage;\n        try {\n            searchPage = await (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.setupPage)(browser);\n            const searchUrl = this.generateSearchUrl(artist, venue, location);\n            console.log(\"Searching VividSeats:\", searchUrl);\n            await searchPage.goto(searchUrl, {\n                waitUntil: \"networkidle0\",\n                timeout: 30000\n            });\n            // Wait for either productions list to appear\n            await searchPage.waitForSelector('[data-testid=\"productions-list\"]', {\n                timeout: 10000\n            });\n            const concerts = await searchPage.evaluate(({ artist, location, venue })=>{\n                // Get all production listings from both \"Upcoming Events\" and \"All Locations\" sections\n                const productionLists = Array.from(document.querySelectorAll('[data-testid=\"productions-list\"]'));\n                const allEvents = [];\n                productionLists.forEach((list)=>{\n                    // First, get all production listings\n                    const listings = Array.from(list.querySelectorAll('[data-testid^=\"production-listing-\"]'));\n                    console.log(`Found ${listings.length} listings`);\n                    listings.forEach((listing)=>{\n                        try {\n                            // Get the anchor element and check if it exists and has href\n                            const anchor = listing.querySelector(\"a\");\n                            if (!anchor || !anchor.href) {\n                                console.log(\"Skipping listing - no valid link found\");\n                                return;\n                            }\n                            // Skip parking listings\n                            if (anchor.href.toLowerCase().includes(\"parking\")) {\n                                console.log(\"Skipping parking listing\");\n                                return;\n                            }\n                            // Get date components with null checks\n                            const dateElement = listing.querySelector('[data-testid=\"date-time-left-element\"]');\n                            if (!dateElement) {\n                                console.log(\"Skipping listing - no date element found\");\n                                return;\n                            }\n                            const dayOfWeek = dateElement.querySelector(\".MuiTypography-overline\")?.textContent?.trim() || \"\";\n                            const date = dateElement.querySelector(\".MuiTypography-small-bold\")?.textContent?.trim() || \"\";\n                            const year = dateElement.querySelector(\".MuiTypography-small-bold:last-of-type\")?.textContent?.trim() || \"\";\n                            const time = dateElement.querySelector(\".MuiTypography-caption\")?.textContent?.trim() || \"\";\n                            // Get title with null check\n                            const titleElement = listing.querySelector(\".styles_titleTruncate__XiZ53\");\n                            if (!titleElement) {\n                                console.log(\"Skipping listing - no title element found\");\n                                return;\n                            }\n                            const title = titleElement.textContent.trim();\n                            // Find venue and location using the styles_labelContainer__ wildcard\n                            const labelContainer = listing.querySelector('[class^=\"styles_labelContainer__\"]');\n                            if (!labelContainer) {\n                                console.log(\"Skipping listing - no label container found\");\n                                return;\n                            }\n                            // Get all text truncate spans within the label container\n                            const truncateSpans = Array.from(labelContainer.querySelectorAll(\".styles_textTruncate__wsM3Q\"));\n                            if (truncateSpans.length < 2) {\n                                console.log(\"Skipping listing - incomplete venue/location info\");\n                                return;\n                            }\n                            // First span is venue, last span is location\n                            const venue = truncateSpans[0].textContent.trim();\n                            const eventLocation = truncateSpans[truncateSpans.length - 1].textContent.trim();\n                            // Only add event if we have all required fields\n                            if (title && date && venue && eventLocation && anchor.href) {\n                                console.log(`Found valid event: ${title} at ${venue}`);\n                                allEvents.push({\n                                    title,\n                                    date: `${date} ${dayOfWeek} ${time}`,\n                                    venue,\n                                    location: eventLocation,\n                                    link: anchor.href,\n                                    source: \"vividseats\",\n                                    rawData: {\n                                        dayOfWeek,\n                                        date,\n                                        year,\n                                        time,\n                                        fullTitle: title\n                                    }\n                                });\n                            }\n                        } catch (err) {\n                            console.log(\"Error parsing event:\", err);\n                        }\n                    });\n                });\n                // Score and sort events by relevance\n                return allEvents.map((event)=>{\n                    let score = 0;\n                    // Exact title match\n                    if (event.title.toLowerCase() === artist.toLowerCase()) score += 100;\n                    else if (event.title.toLowerCase().includes(artist.toLowerCase())) score += 50;\n                    // Location match\n                    if (event.location.toLowerCase().includes(location.toLowerCase())) score += 30;\n                    // Venue match (if provided)\n                    if (venue && event.venue.toLowerCase().includes(venue.toLowerCase())) score += 20;\n                    return {\n                        ...event,\n                        matchScore: score\n                    };\n                }).sort((a, b)=>b.matchScore - a.matchScore);\n            }, {\n                artist,\n                location,\n                venue\n            });\n            console.log(`Found ${concerts.length} matching VividSeats event(s)`);\n            // Get tickets for the best matching event(s)\n            const bestMatches = concerts.filter((event)=>event.matchScore >= 50);\n            const concertsWithPrices = [];\n            // Process each event only once\n            const processedUrls = new Set();\n            for (const concert of bestMatches){\n                // Skip if we've already processed this URL\n                if (processedUrls.has(concert.link)) {\n                    continue;\n                }\n                console.log(`Processing event: \"${concert.title}\" (match score: ${concert.matchScore})`);\n                // Use the existing page to navigate to the event\n                await searchPage.goto(concert.link, {\n                    waitUntil: \"networkidle0\",\n                    timeout: 30000\n                });\n                // Extract tickets directly from the loaded page\n                const tickets = await searchPage.evaluate(()=>{\n                    const groupListings = Array.from(document.querySelectorAll('[data-testid=\"listing-group-row-container\"]'));\n                    const individualListings = Array.from(document.querySelectorAll('[data-testid=\"listing-row-container\"]'));\n                    console.log(`Found ${groupListings.length} group listings and ${individualListings.length} individual listings`);\n                    const allListings = [\n                        ...groupListings,\n                        ...individualListings\n                    ];\n                    const normalizeSection = (section)=>{\n                        if (!section) return \"UNKNOWN\";\n                        const sectionUpper = section.toUpperCase();\n                        const categories = {\n                            \"GENERAL ADMISSION\": [\n                                \"GA\",\n                                \"GEN\",\n                                \"GENADM\"\n                            ],\n                            \"GRANDSTAND\": [\n                                \"GRAND\",\n                                \"GSADA\",\n                                \"GS\"\n                            ],\n                            \"PREMIUM\": [\n                                \"PREM\",\n                                \"PRM\"\n                            ],\n                            \"VIP\": [\n                                \"VIP\"\n                            ],\n                            \"BALCONY\": [\n                                \"BAL\",\n                                \"BALC\"\n                            ],\n                            \"FLOOR\": [\n                                \"FLR\",\n                                \"FLOOR\"\n                            ],\n                            \"STANDING\": [\n                                \"STAND\"\n                            ]\n                        };\n                        for (const [category, keywords] of Object.entries(categories)){\n                            if (keywords.some((keyword)=>sectionUpper.includes(keyword))) {\n                                return category;\n                            }\n                        }\n                        return `UNCATEGORIZED: ${section}`;\n                    };\n                    const ticketsBySection = {};\n                    allListings.forEach((listing, index)=>{\n                        try {\n                            const section = listing.querySelector('[data-testid^=\"GRANDS\"], [data-testid^=\"GSADA\"], [data-testid^=\"PREM\"], [data-testid^=\"GENADM\"], .MuiTypography-small-medium')?.textContent?.trim() || \"\";\n                            const quantity = listing.querySelector(\".MuiTypography-caption-regular\")?.textContent?.trim() || \"\";\n                            const price = listing.querySelector('[data-testid=\"listing-price\"]')?.textContent?.trim() || \"\";\n                            const row = listing.querySelector('[data-testid=\"row\"]')?.textContent?.trim();\n                            const dealScore = listing.querySelector('[data-testid=\"deal-score\"], .styles_greatestScoreLabel__Kq4O3')?.textContent?.trim() || \"\";\n                            const listingId = listing.getAttribute(\"data-listing-id\");\n                            const normalizedSection = normalizeSection(section);\n                            if (!ticketsBySection[normalizedSection]) {\n                                ticketsBySection[normalizedSection] = {\n                                    section: normalizedSection,\n                                    originalSection: section,\n                                    category: normalizedSection.startsWith(\"UNCATEGORIZED\") ? \"UNKNOWN\" : normalizedSection,\n                                    tickets: []\n                                };\n                            }\n                            if (price && section) {\n                                ticketsBySection[normalizedSection].tickets.push({\n                                    quantity,\n                                    price,\n                                    dealScore,\n                                    rawPrice: parseFloat(price.replace(/[^0-9.]/g, \"\")),\n                                    row: row || null,\n                                    listingId,\n                                    originalSection: section,\n                                    listingUrl: window.location.href\n                                });\n                            }\n                        } catch (err) {\n                            console.log(`Error processing listing ${index + 1}:`, err);\n                        }\n                    });\n                    Object.values(ticketsBySection).forEach((section)=>{\n                        section.tickets.sort((a, b)=>a.rawPrice - b.rawPrice);\n                        section.lowestPrice = section.tickets[0]?.rawPrice || null;\n                        section.highestPrice = section.tickets[section.tickets.length - 1]?.rawPrice || null;\n                        section.numberOfListings = section.tickets.length;\n                    });\n                    return {\n                        totalSections: Object.keys(ticketsBySection).length,\n                        sections: Object.values(ticketsBySection).sort((a, b)=>a.lowestPrice - b.lowestPrice)\n                    };\n                });\n                if (tickets && tickets.totalSections > 0) {\n                    console.log(`Found tickets in ${tickets.totalSections} sections`);\n                    concertsWithPrices.push({\n                        ...concert,\n                        tickets\n                    });\n                }\n                // Mark this URL as processed\n                processedUrls.add(concert.link);\n            }\n            return concertsWithPrices;\n        } catch (error) {\n            console.error(\"VividSeats error details:\", error);\n            if (searchPage) {\n                await searchPage.screenshot({\n                    path: \"vividseats-error.png\",\n                    fullPage: true\n                });\n            }\n            return [];\n        } finally{\n            if (browser) {\n                await browser.close();\n            }\n        }\n    }\n    async getTicketPrices(eventUrl, existingPage = null) {\n        let browser = null;\n        let page = existingPage;\n        try {\n            if (!existingPage) {\n                browser = await (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.setupBrowser)();\n                page = await (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.setupPage)(browser);\n                console.log(\"Navigating to event page:\", eventUrl);\n            }\n            // Function to check for content\n            const checkContent = async ()=>{\n                try {\n                    const content = await page.evaluate(()=>{\n                        const selectors = [\n                            \".styles_listingRowContainer__KNM4_\",\n                            \".styles_listingRowContainer__d8WLZ\",\n                            '[data-testid=\"listing-group-row-container\"]',\n                            '[data-testid=\"listing-row-container\"]'\n                        ];\n                        for (const selector of selectors){\n                            if (document.querySelector(selector)) {\n                                return true;\n                            }\n                        }\n                        return false;\n                    });\n                    return content;\n                } catch (error) {\n                    console.log(\"Error checking content:\", error);\n                    return false;\n                }\n            };\n            // Initial navigation\n            try {\n                await page.goto(eventUrl, {\n                    waitUntil: \"domcontentloaded\",\n                    timeout: 30000\n                });\n                await page.waitForTimeout(2000);\n            } catch (error) {\n                console.log(\"Initial navigation error:\", error);\n            }\n            // Check for content\n            let contentFound = await checkContent();\n            let attempts = 1;\n            const maxAttempts = 3;\n            while(!contentFound && attempts < maxAttempts){\n                console.log(`Content check attempt ${attempts} of ${maxAttempts}`);\n                try {\n                    await page.reload({\n                        waitUntil: \"domcontentloaded\"\n                    });\n                    await page.waitForTimeout(2000);\n                    contentFound = await checkContent();\n                    if (contentFound) {\n                        console.log(\"Found content on attempt\", attempts);\n                        break;\n                    }\n                } catch (error) {\n                    console.log(`Error on attempt ${attempts}:`, error);\n                }\n                attempts++;\n            }\n            if (!contentFound) {\n                throw new Error(\"Could not find content after multiple attempts\");\n            }\n            // Extract tickets only if content was found\n            const tickets = await page.evaluate(()=>{\n                const groupListings = Array.from(document.querySelectorAll('[data-testid=\"listing-group-row-container\"]'));\n                const individualListings = Array.from(document.querySelectorAll('[data-testid=\"listing-row-container\"]'));\n                console.log(`Found ${groupListings.length} group listings and ${individualListings.length} individual listings`);\n                const allListings = [\n                    ...groupListings,\n                    ...individualListings\n                ];\n                const normalizeSection = (section)=>{\n                    if (!section) return \"UNKNOWN\";\n                    const sectionUpper = section.toUpperCase();\n                    const categories = {\n                        \"GENERAL ADMISSION\": [\n                            \"GA\",\n                            \"GEN\",\n                            \"GENADM\"\n                        ],\n                        \"GRANDSTAND\": [\n                            \"GRAND\",\n                            \"GSADA\",\n                            \"GS\"\n                        ],\n                        \"PREMIUM\": [\n                            \"PREM\",\n                            \"PRM\"\n                        ],\n                        \"VIP\": [\n                            \"VIP\"\n                        ],\n                        \"BALCONY\": [\n                            \"BAL\",\n                            \"BALC\"\n                        ],\n                        \"FLOOR\": [\n                            \"FLR\",\n                            \"FLOOR\"\n                        ],\n                        \"STANDING\": [\n                            \"STAND\"\n                        ]\n                    };\n                    for (const [category, keywords] of Object.entries(categories)){\n                        if (keywords.some((keyword)=>sectionUpper.includes(keyword))) {\n                            return category;\n                        }\n                    }\n                    return `UNCATEGORIZED: ${section}`;\n                };\n                const ticketsBySection = {};\n                allListings.forEach((listing, index)=>{\n                    try {\n                        const section = listing.querySelector('[data-testid^=\"GRANDS\"], [data-testid^=\"GSADA\"], [data-testid^=\"PREM\"], [data-testid^=\"GENADM\"], .MuiTypography-small-medium')?.textContent?.trim() || \"\";\n                        const quantity = listing.querySelector(\".MuiTypography-caption-regular\")?.textContent?.trim() || \"\";\n                        const price = listing.querySelector('[data-testid=\"listing-price\"]')?.textContent?.trim() || \"\";\n                        const row = listing.querySelector('[data-testid=\"row\"]')?.textContent?.trim();\n                        const dealScore = listing.querySelector('[data-testid=\"deal-score\"], .styles_greatestScoreLabel__Kq4O3')?.textContent?.trim() || \"\";\n                        const listingId = listing.getAttribute(\"data-listing-id\");\n                        const normalizedSection = normalizeSection(section);\n                        if (!ticketsBySection[normalizedSection]) {\n                            ticketsBySection[normalizedSection] = {\n                                section: normalizedSection,\n                                originalSection: section,\n                                category: normalizedSection.startsWith(\"UNCATEGORIZED\") ? \"UNKNOWN\" : normalizedSection,\n                                tickets: []\n                            };\n                        }\n                        if (price && section) {\n                            ticketsBySection[normalizedSection].tickets.push({\n                                quantity,\n                                price,\n                                dealScore,\n                                rawPrice: parseFloat(price.replace(/[^0-9.]/g, \"\")),\n                                row: row || null,\n                                listingId,\n                                originalSection: section,\n                                listingUrl: window.location.href\n                            });\n                        }\n                    } catch (err) {\n                        console.log(`Error processing listing ${index + 1}:`, err);\n                    }\n                });\n                Object.values(ticketsBySection).forEach((section)=>{\n                    section.tickets.sort((a, b)=>a.rawPrice - b.rawPrice);\n                    section.lowestPrice = section.tickets[0]?.rawPrice || null;\n                    section.highestPrice = section.tickets[section.tickets.length - 1]?.rawPrice || null;\n                    section.numberOfListings = section.tickets.length;\n                });\n                return {\n                    totalSections: Object.keys(ticketsBySection).length,\n                    sections: Object.values(ticketsBySection).sort((a, b)=>a.lowestPrice - b.lowestPrice)\n                };\n            });\n            console.log(`Found tickets in ${tickets.totalSections} sections`);\n            return tickets;\n        } catch (error) {\n            console.error(\"Error fetching ticket prices:\", error);\n            return {\n                totalSections: 0,\n                sections: []\n            };\n        } finally{\n            if (browser && !existingPage) {\n                try {\n                    await browser.close();\n                } catch (error) {\n                    console.log(\"Error closing browser:\", error);\n                }\n            }\n        }\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (VividSeatsSearcher);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FBTzNHO1FBRVQsRUFBRSxPQUFPakMsT0FBTztZQUNkTSxRQUFRTixLQUFLLENBQUMsaUNBQWlDQTtZQUMvQyxPQUFPO2dCQUFFNEksZUFBZTtnQkFBR3pHLFVBQVUsRUFBRTtZQUFDO1FBQzFDLFNBQVU7WUFDUixJQUFJZ0MsV0FBVyxDQUFDa0YsY0FBYztnQkFDNUIsSUFBSTtvQkFDRixNQUFNbEYsUUFBUStFLEtBQUs7Z0JBQ3JCLEVBQUUsT0FBT2xKLE9BQU87b0JBQ2RNLFFBQVFRLEdBQUcsQ0FBQywwQkFBMEJkO2dCQUN4QztZQUNGO1FBQ0Y7SUFDRjtBQUNGO0FBRUEsaUVBQWVvRCxrQkFBa0JBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90aWNrZXQtc2VhcmNoZXIvLi9zcmMvdml2aWQtc2VhdHMuanM/YjkyMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xyXG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICdAL3NyYy9jb25maWcvZW52JztcclxuaW1wb3J0IHsgc2V0dXBCcm93c2VyLCBzZXR1cFBhZ2UsIGZvcm1hdFByaWNlIH0gZnJvbSAnLi91dGlscy5qcyc7XHJcbmltcG9ydCB7IHBhcnNlIH0gZnJvbSAnZGF0ZS1mbnMnO1xyXG5cclxuY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoXHJcbiAgY29uZmlnLnN1cGFiYXNlLnVybCxcclxuICBjb25maWcuc3VwYWJhc2Uuc2VydmljZUtleVxyXG4pO1xyXG5cclxuLy8gRnVuY3Rpb24gdG8gY2hlY2sgaWYgYW4gZXZlbnQgZXhpc3RzXHJcbmFzeW5jIGZ1bmN0aW9uIGV2ZW50RXhpc3RzKG5hbWUsIGRhdGUpIHtcclxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ2V2ZW50cycpXHJcbiAgICAuc2VsZWN0KCdpZCcpXHJcbiAgICAuZXEoJ25hbWUnLCBuYW1lKVxyXG4gICAgLmVxKCdkYXRlJywgZGF0ZSlcclxuICAgIC5zaW5nbGUoKTtcclxuICBcclxuICBpZiAoZXJyb3IgJiYgZXJyb3IuY29kZSAhPT0gJ1BHUlNUMTE2Jykge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY2hlY2tpbmcgZXZlbnQgZXhpc3RlbmNlOicsIGVycm9yKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIGRhdGEgPyB0cnVlIDogZmFsc2U7XHJcbn1cclxuXHJcbi8vIEZ1bmN0aW9uIHRvIGNoZWNrIGlmIGEgbGluayBleGlzdHNcclxuYXN5bmMgZnVuY3Rpb24gbGlua0V4aXN0cyhldmVudElkLCBzb3VyY2UpIHtcclxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ2V2ZW50X2xpbmtzJylcclxuICAgIC5zZWxlY3QoJ2lkJylcclxuICAgIC5lcSgnZXZlbnRfaWQnLCBldmVudElkKVxyXG4gICAgLmVxKCdzb3VyY2UnLCBzb3VyY2UpXHJcbiAgICAuc2luZ2xlKCk7XHJcbiAgXHJcbiAgaWYgKGVycm9yICYmIGVycm9yLmNvZGUgIT09ICdQR1JTVDExNicpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIGxpbmsgZXhpc3RlbmNlOicsIGVycm9yKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIGRhdGEgPyB0cnVlIDogZmFsc2U7XHJcbn1cclxuXHJcbi8vIEZ1bmN0aW9uIHRvIGluc2VydCBhbiBldmVudFxyXG5hc3luYyBmdW5jdGlvbiBpbnNlcnRFdmVudChldmVudCkge1xyXG4gIGNvbnN0IHBhcnNlZERhdGUgPSBwYXJzZShldmVudC5kYXRlLCAnTU1NIGQgeXl5eSBoOm1tIGEnLCBuZXcgRGF0ZSgpKTtcclxuXHJcbiAgY29uc29sZS5sb2coYFBhcnNlZCBEYXRlIE9iamVjdDogJHtwYXJzZWREYXRlfSB8IFRpbWVzdGFtcDogJHtwYXJzZWREYXRlLmdldFRpbWUoKX1gKTtcclxuXHJcbiAgaWYgKGlzTmFOKHBhcnNlZERhdGUpKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIERhdGUgb2JqZWN0OicsIGV2ZW50LmRhdGUpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICAvLyBDaGVjayBpZiB0aGUgZXZlbnQgYWxyZWFkeSBleGlzdHNcclxuICBjb25zdCBleGlzdHMgPSBhd2FpdCBldmVudEV4aXN0cyhldmVudC50aXRsZSwgcGFyc2VkRGF0ZS50b0lTT1N0cmluZygpKTtcclxuICBpZiAoZXhpc3RzKSB7XHJcbiAgICBjb25zb2xlLmxvZyhgRXZlbnQgXCIke2V2ZW50LnRpdGxlfVwiIG9uICR7cGFyc2VkRGF0ZS50b0lTT1N0cmluZygpfSBhbHJlYWR5IGV4aXN0cy4gU2tpcHBpbmcgaW5zZXJ0aW9uLmApO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBjb25zdCBldmVudERhdGEgPSB7XHJcbiAgICBuYW1lOiBldmVudC50aXRsZSxcclxuICAgIHR5cGU6IGV2ZW50LnR5cGUgfHwgJ0NvbmNlcnQnLFxyXG4gICAgY2F0ZWdvcnk6IGV2ZW50LmNhdGVnb3J5IHx8ICdVbmtub3duJyxcclxuICAgIGRhdGU6IHBhcnNlZERhdGUudG9JU09TdHJpbmcoKSxcclxuICAgIHZlbnVlOiBldmVudC52ZW51ZVxyXG4gIH07XHJcblxyXG4gIGNvbnNvbGUubG9nKCdBdHRlbXB0aW5nIHRvIGluc2VydCBldmVudDonLCBldmVudERhdGEpO1xyXG5cclxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ2V2ZW50cycpXHJcbiAgICAuaW5zZXJ0KFtldmVudERhdGFdKVxyXG4gICAgLnNlbGVjdCgnaWQnKTtcclxuICBcclxuICBpZiAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluc2VydGluZyBldmVudDonLCBlcnJvcik7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZXRhaWxzOicsIHtcclxuICAgICAgY29kZTogZXJyb3IuY29kZSxcclxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcclxuICAgICAgZGV0YWlsczogZXJyb3IuZGV0YWlscyxcclxuICAgICAgaGludDogZXJyb3IuaGludFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbiAgXHJcbiAgY29uc29sZS5sb2coJ1N1Y2Nlc3NmdWxseSBpbnNlcnRlZCBldmVudDonLCBkYXRhWzBdLmlkKTtcclxuICByZXR1cm4gZGF0YVswXS5pZDtcclxufVxyXG5cclxuLy8gRnVuY3Rpb24gdG8gaW5zZXJ0IGV2ZW50IGxpbmtzXHJcbmFzeW5jIGZ1bmN0aW9uIGluc2VydEV2ZW50TGluayhldmVudElkLCBzb3VyY2UsIHVybCkge1xyXG4gIC8vIENoZWNrIGlmIHRoZSBsaW5rIGFscmVhZHkgZXhpc3RzIHRvIHByZXZlbnQgZHVwbGljYXRlc1xyXG4gIGNvbnN0IGV4aXN0cyA9IGF3YWl0IGxpbmtFeGlzdHMoZXZlbnRJZCwgc291cmNlKTtcclxuICBpZiAoZXhpc3RzKSB7XHJcbiAgICBjb25zb2xlLmxvZyhgRXZlbnQgbGluayBmcm9tICR7c291cmNlfSBhbHJlYWR5IGV4aXN0cyBmb3IgZXZlbnQgSUQgJHtldmVudElkfS4gU2tpcHBpbmcgaW5zZXJ0aW9uLmApO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgbGlua0RhdGEgPSB7XHJcbiAgICBldmVudF9pZDogZXZlbnRJZCxcclxuICAgIHNvdXJjZTogc291cmNlLFxyXG4gICAgdXJsOiB1cmxcclxuICB9O1xyXG5cclxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ2V2ZW50X2xpbmtzJylcclxuICAgIC5pbnNlcnQoW2xpbmtEYXRhXSk7XHJcbiAgXHJcbiAgaWYgKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbnNlcnRpbmcgZXZlbnQgbGluayAoJHtzb3VyY2V9KTpgLCBlcnJvcik7XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnNvbGUubG9nKGBJbnNlcnRlZCBldmVudCBsaW5rICgke3NvdXJjZX0pOmAsIGRhdGFbMF0uaWQpO1xyXG4gIH1cclxufVxyXG5cclxuLy8gRnVuY3Rpb24gdG8gaW5zZXJ0IHRpY2tldHNcclxuYXN5bmMgZnVuY3Rpb24gaW5zZXJ0VGlja2V0cyhldmVudElkLCB0aWNrZXRzKSB7XHJcbiAgY29uc3QgZm9ybWF0dGVkVGlja2V0cyA9IHRpY2tldHMuc2VjdGlvbnMuZmxhdE1hcChzZWN0aW9uID0+IFxyXG4gICAgc2VjdGlvbi50aWNrZXRzLm1hcCh0aWNrZXQgPT4gKHtcclxuICAgICAgZXZlbnRfaWQ6IGV2ZW50SWQsXHJcbiAgICAgIHByaWNlOiB0aWNrZXQucmF3UHJpY2UsXHJcbiAgICAgIHR5cGU6IHNlY3Rpb24uY2F0ZWdvcnksXHJcbiAgICAgIHNlY3Rpb246IHNlY3Rpb24uc2VjdGlvbixcclxuICAgICAgcm93OiB0aWNrZXQucm93IHx8IG51bGwsXHJcbiAgICAgIHF1YW50aXR5OiBwYXJzZUludCh0aWNrZXQucXVhbnRpdHksIDEwKSB8fCAxLFxyXG4gICAgICBzb3VyY2U6ICd2aXZpZHNlYXRzJyxcclxuICAgICAgdXJsOiB0aWNrZXQubGlzdGluZ1VybCxcclxuICAgICAgcmF3X2RhdGE6IHRpY2tldFxyXG4gICAgfSkpXHJcbiAgKTtcclxuICBcclxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ3RpY2tldHMnKVxyXG4gICAgLmluc2VydChmb3JtYXR0ZWRUaWNrZXRzKTtcclxuICBcclxuICBpZiAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluc2VydGluZyB0aWNrZXRzOicsIGVycm9yKTtcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc29sZS5sb2coJ0luc2VydGVkIHRpY2tldHM6JywgZGF0YS5sZW5ndGgpO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gbWFpblNlYXJjaChhcnRpc3QsIHZlbnVlLCBsb2NhdGlvbikge1xyXG4gIGNvbnN0IHNlYXJjaGVyID0gbmV3IFZpdmlkU2VhdHNTZWFyY2hlcigpO1xyXG4gIGNvbnN0IGNvbmNlcnRzV2l0aFByaWNlcyA9IGF3YWl0IHNlYXJjaGVyLnNlYXJjaENvbmNlcnRzKGFydGlzdCwgdmVudWUsIGxvY2F0aW9uKTtcclxuICBcclxuICBmb3IgKGNvbnN0IGNvbmNlcnQgb2YgY29uY2VydHNXaXRoUHJpY2VzKSB7XHJcbiAgICBjb25zdCBldmVudElkID0gYXdhaXQgaW5zZXJ0RXZlbnQoY29uY2VydCk7XHJcbiAgICBpZiAoZXZlbnRJZCkge1xyXG4gICAgICAvLyBJbnNlcnQgZXZlbnQgbGlua3MgaW50byBldmVudF9saW5rcyB0YWJsZVxyXG4gICAgICBhd2FpdCBpbnNlcnRFdmVudExpbmsoZXZlbnRJZCwgJ3Zpdmlkc2VhdHMnLCBjb25jZXJ0LmxpbmspO1xyXG5cclxuICAgICAgLy8gSW5zZXJ0IHRpY2tldHMgaW50byB0aWNrZXRzIHRhYmxlXHJcbiAgICAgIGlmIChjb25jZXJ0LnRpY2tldHMpIHtcclxuICAgICAgICBhd2FpdCBpbnNlcnRUaWNrZXRzKGV2ZW50SWQsIGNvbmNlcnQudGlja2V0cyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8vIENhbGwgbWFpblNlYXJjaCB3aXRoIHlvdXIgcGFyYW1ldGVyc1xyXG4vLyBtYWluU2VhcmNoKCdDYWtlJywgJ1NhbHQgU2hlZCcsICdDaGljYWdvJyk7XHJcblxyXG5jbGFzcyBWaXZpZFNlYXRzU2VhcmNoZXIge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5iYXNlVXJsID0gJ2h0dHBzOi8vd3d3LnZpdmlkc2VhdHMuY29tL3NlYXJjaCc7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZVNlYXJjaFVybChhcnRpc3QsIHZlbnVlLCBsb2NhdGlvbikge1xyXG4gICAgY29uc3Qgc2VhcmNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xyXG4gICAgbGV0IHNlYXJjaFRlcm1zID0gW107XHJcbiAgICBcclxuICAgIGlmIChhcnRpc3QpIHNlYXJjaFRlcm1zLnB1c2goYXJ0aXN0KTtcclxuICAgIGlmIChsb2NhdGlvbikgc2VhcmNoVGVybXMucHVzaChsb2NhdGlvbik7XHJcbiAgICBcclxuICAgIHNlYXJjaFBhcmFtcy5hcHBlbmQoJ3NlYXJjaFRlcm0nLCBzZWFyY2hUZXJtcy5qb2luKCcgJykpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gYCR7dGhpcy5iYXNlVXJsfT8ke3NlYXJjaFBhcmFtcy50b1N0cmluZygpfWA7XHJcbiAgfVxyXG5cclxuICAvLyAuLi4gZXhpc3RpbmcgbWV0aG9kcyBpbmNsdWRpbmcgZ2V0VGlja2V0UHJpY2VzIGFuZCBzZWFyY2hDb25jZXJ0cyAuLi5cclxuXHJcbiAgYXN5bmMgc2VhcmNoQ29uY2VydHMoYXJ0aXN0LCB2ZW51ZSwgbG9jYXRpb24pIHtcclxuICAgIGNvbnN0IGJyb3dzZXIgPSBhd2FpdCBzZXR1cEJyb3dzZXIoKTtcclxuICAgIGxldCBzZWFyY2hQYWdlO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIHNlYXJjaFBhZ2UgPSBhd2FpdCBzZXR1cFBhZ2UoYnJvd3Nlcik7XHJcbiAgICAgIGNvbnN0IHNlYXJjaFVybCA9IHRoaXMuZ2VuZXJhdGVTZWFyY2hVcmwoYXJ0aXN0LCB2ZW51ZSwgbG9jYXRpb24pO1xyXG4gICAgICBjb25zb2xlLmxvZygnU2VhcmNoaW5nIFZpdmlkU2VhdHM6Jywgc2VhcmNoVXJsKTtcclxuXHJcbiAgICAgIGF3YWl0IHNlYXJjaFBhZ2UuZ290byhzZWFyY2hVcmwsIHtcclxuICAgICAgICB3YWl0VW50aWw6ICduZXR3b3JraWRsZTAnLFxyXG4gICAgICAgIHRpbWVvdXQ6IDMwMDAwXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gV2FpdCBmb3IgZWl0aGVyIHByb2R1Y3Rpb25zIGxpc3QgdG8gYXBwZWFyXHJcbiAgICAgIGF3YWl0IHNlYXJjaFBhZ2Uud2FpdEZvclNlbGVjdG9yKCdbZGF0YS10ZXN0aWQ9XCJwcm9kdWN0aW9ucy1saXN0XCJdJywgeyB0aW1lb3V0OiAxMDAwMCB9KTtcclxuXHJcbiAgICAgIGNvbnN0IGNvbmNlcnRzID0gYXdhaXQgc2VhcmNoUGFnZS5ldmFsdWF0ZSgoeyBhcnRpc3QsIGxvY2F0aW9uLCB2ZW51ZSB9KSA9PiB7XHJcbiAgICAgICAgLy8gR2V0IGFsbCBwcm9kdWN0aW9uIGxpc3RpbmdzIGZyb20gYm90aCBcIlVwY29taW5nIEV2ZW50c1wiIGFuZCBcIkFsbCBMb2NhdGlvbnNcIiBzZWN0aW9uc1xyXG4gICAgICAgIGNvbnN0IHByb2R1Y3Rpb25MaXN0cyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtdGVzdGlkPVwicHJvZHVjdGlvbnMtbGlzdFwiXScpKTtcclxuICAgICAgICBjb25zdCBhbGxFdmVudHMgPSBbXTtcclxuXHJcbiAgICAgICAgcHJvZHVjdGlvbkxpc3RzLmZvckVhY2gobGlzdCA9PiB7XHJcbiAgICAgICAgICAvLyBGaXJzdCwgZ2V0IGFsbCBwcm9kdWN0aW9uIGxpc3RpbmdzXHJcbiAgICAgICAgICBjb25zdCBsaXN0aW5ncyA9IEFycmF5LmZyb20obGlzdC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS10ZXN0aWRePVwicHJvZHVjdGlvbi1saXN0aW5nLVwiXScpKTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGBGb3VuZCAke2xpc3RpbmdzLmxlbmd0aH0gbGlzdGluZ3NgKTtcclxuXHJcbiAgICAgICAgICBsaXN0aW5ncy5mb3JFYWNoKGxpc3RpbmcgPT4ge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIC8vIEdldCB0aGUgYW5jaG9yIGVsZW1lbnQgYW5kIGNoZWNrIGlmIGl0IGV4aXN0cyBhbmQgaGFzIGhyZWZcclxuICAgICAgICAgICAgICBjb25zdCBhbmNob3IgPSBsaXN0aW5nLnF1ZXJ5U2VsZWN0b3IoJ2EnKTtcclxuICAgICAgICAgICAgICBpZiAoIWFuY2hvciB8fCAhYW5jaG9yLmhyZWYpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTa2lwcGluZyBsaXN0aW5nIC0gbm8gdmFsaWQgbGluayBmb3VuZCcpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgLy8gU2tpcCBwYXJraW5nIGxpc3RpbmdzXHJcbiAgICAgICAgICAgICAgaWYgKGFuY2hvci5ocmVmLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3BhcmtpbmcnKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NraXBwaW5nIHBhcmtpbmcgbGlzdGluZycpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgLy8gR2V0IGRhdGUgY29tcG9uZW50cyB3aXRoIG51bGwgY2hlY2tzXHJcbiAgICAgICAgICAgICAgY29uc3QgZGF0ZUVsZW1lbnQgPSBsaXN0aW5nLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXRlc3RpZD1cImRhdGUtdGltZS1sZWZ0LWVsZW1lbnRcIl0nKTtcclxuICAgICAgICAgICAgICBpZiAoIWRhdGVFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU2tpcHBpbmcgbGlzdGluZyAtIG5vIGRhdGUgZWxlbWVudCBmb3VuZCcpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgY29uc3QgZGF5T2ZXZWVrID0gZGF0ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLk11aVR5cG9ncmFwaHktb3ZlcmxpbmUnKT8udGV4dENvbnRlbnQ/LnRyaW0oKSB8fCAnJztcclxuICAgICAgICAgICAgICBjb25zdCBkYXRlID0gZGF0ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLk11aVR5cG9ncmFwaHktc21hbGwtYm9sZCcpPy50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnO1xyXG4gICAgICAgICAgICAgIGNvbnN0IHllYXIgPSBkYXRlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuTXVpVHlwb2dyYXBoeS1zbWFsbC1ib2xkOmxhc3Qtb2YtdHlwZScpPy50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnO1xyXG4gICAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBkYXRlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuTXVpVHlwb2dyYXBoeS1jYXB0aW9uJyk/LnRleHRDb250ZW50Py50cmltKCkgfHwgJyc7XHJcblxyXG4gICAgICAgICAgICAgIC8vIEdldCB0aXRsZSB3aXRoIG51bGwgY2hlY2tcclxuICAgICAgICAgICAgICBjb25zdCB0aXRsZUVsZW1lbnQgPSBsaXN0aW5nLnF1ZXJ5U2VsZWN0b3IoJy5zdHlsZXNfdGl0bGVUcnVuY2F0ZV9fWGlaNTMnKTtcclxuICAgICAgICAgICAgICBpZiAoIXRpdGxlRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NraXBwaW5nIGxpc3RpbmcgLSBubyB0aXRsZSBlbGVtZW50IGZvdW5kJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gdGl0bGVFbGVtZW50LnRleHRDb250ZW50LnRyaW0oKTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gRmluZCB2ZW51ZSBhbmQgbG9jYXRpb24gdXNpbmcgdGhlIHN0eWxlc19sYWJlbENvbnRhaW5lcl9fIHdpbGRjYXJkXHJcbiAgICAgICAgICAgICAgY29uc3QgbGFiZWxDb250YWluZXIgPSBsaXN0aW5nLnF1ZXJ5U2VsZWN0b3IoJ1tjbGFzc149XCJzdHlsZXNfbGFiZWxDb250YWluZXJfX1wiXScpO1xyXG4gICAgICAgICAgICAgIGlmICghbGFiZWxDb250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTa2lwcGluZyBsaXN0aW5nIC0gbm8gbGFiZWwgY29udGFpbmVyIGZvdW5kJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAvLyBHZXQgYWxsIHRleHQgdHJ1bmNhdGUgc3BhbnMgd2l0aGluIHRoZSBsYWJlbCBjb250YWluZXJcclxuICAgICAgICAgICAgICBjb25zdCB0cnVuY2F0ZVNwYW5zID0gQXJyYXkuZnJvbShsYWJlbENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc3R5bGVzX3RleHRUcnVuY2F0ZV9fd3NNM1EnKSk7XHJcbiAgICAgICAgICAgICAgaWYgKHRydW5jYXRlU3BhbnMubGVuZ3RoIDwgMikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NraXBwaW5nIGxpc3RpbmcgLSBpbmNvbXBsZXRlIHZlbnVlL2xvY2F0aW9uIGluZm8nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIC8vIEZpcnN0IHNwYW4gaXMgdmVudWUsIGxhc3Qgc3BhbiBpcyBsb2NhdGlvblxyXG4gICAgICAgICAgICAgIGNvbnN0IHZlbnVlID0gdHJ1bmNhdGVTcGFuc1swXS50ZXh0Q29udGVudC50cmltKCk7XHJcbiAgICAgICAgICAgICAgY29uc3QgZXZlbnRMb2NhdGlvbiA9IHRydW5jYXRlU3BhbnNbdHJ1bmNhdGVTcGFucy5sZW5ndGggLSAxXS50ZXh0Q29udGVudC50cmltKCk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIE9ubHkgYWRkIGV2ZW50IGlmIHdlIGhhdmUgYWxsIHJlcXVpcmVkIGZpZWxkc1xyXG4gICAgICAgICAgICAgIGlmICh0aXRsZSAmJiBkYXRlICYmIHZlbnVlICYmIGV2ZW50TG9jYXRpb24gJiYgYW5jaG9yLmhyZWYpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBGb3VuZCB2YWxpZCBldmVudDogJHt0aXRsZX0gYXQgJHt2ZW51ZX1gKTtcclxuICAgICAgICAgICAgICAgIGFsbEV2ZW50cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgdGl0bGUsXHJcbiAgICAgICAgICAgICAgICAgIGRhdGU6IGAke2RhdGV9ICR7ZGF5T2ZXZWVrfSAke3RpbWV9YCxcclxuICAgICAgICAgICAgICAgICAgdmVudWUsXHJcbiAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBldmVudExvY2F0aW9uLFxyXG4gICAgICAgICAgICAgICAgICBsaW5rOiBhbmNob3IuaHJlZixcclxuICAgICAgICAgICAgICAgICAgc291cmNlOiAndml2aWRzZWF0cycsXHJcbiAgICAgICAgICAgICAgICAgIHJhd0RhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBkYXlPZldlZWssXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICB5ZWFyLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZnVsbFRpdGxlOiB0aXRsZVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBwYXJzaW5nIGV2ZW50OicsIGVycik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBTY29yZSBhbmQgc29ydCBldmVudHMgYnkgcmVsZXZhbmNlXHJcbiAgICAgICAgcmV0dXJuIGFsbEV2ZW50cy5tYXAoZXZlbnQgPT4ge1xyXG4gICAgICAgICAgbGV0IHNjb3JlID0gMDtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gRXhhY3QgdGl0bGUgbWF0Y2hcclxuICAgICAgICAgIGlmIChldmVudC50aXRsZS50b0xvd2VyQ2FzZSgpID09PSBhcnRpc3QudG9Mb3dlckNhc2UoKSkgc2NvcmUgKz0gMTAwO1xyXG4gICAgICAgICAgLy8gQ29udGFpbnMgYXJ0aXN0IG5hbWVcclxuICAgICAgICAgIGVsc2UgaWYgKGV2ZW50LnRpdGxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoYXJ0aXN0LnRvTG93ZXJDYXNlKCkpKSBzY29yZSArPSA1MDtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gTG9jYXRpb24gbWF0Y2hcclxuICAgICAgICAgIGlmIChldmVudC5sb2NhdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvY2F0aW9uLnRvTG93ZXJDYXNlKCkpKSBzY29yZSArPSAzMDtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gVmVudWUgbWF0Y2ggKGlmIHByb3ZpZGVkKVxyXG4gICAgICAgICAgaWYgKHZlbnVlICYmIGV2ZW50LnZlbnVlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModmVudWUudG9Mb3dlckNhc2UoKSkpIHNjb3JlICs9IDIwO1xyXG5cclxuICAgICAgICAgIHJldHVybiB7IC4uLmV2ZW50LCBtYXRjaFNjb3JlOiBzY29yZSB9O1xyXG4gICAgICAgIH0pLnNvcnQoKGEsIGIpID0+IGIubWF0Y2hTY29yZSAtIGEubWF0Y2hTY29yZSk7XHJcbiAgICAgIH0sIHsgYXJ0aXN0LCBsb2NhdGlvbiwgdmVudWUgfSk7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhgRm91bmQgJHtjb25jZXJ0cy5sZW5ndGh9IG1hdGNoaW5nIFZpdmlkU2VhdHMgZXZlbnQocylgKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEdldCB0aWNrZXRzIGZvciB0aGUgYmVzdCBtYXRjaGluZyBldmVudChzKVxyXG4gICAgICBjb25zdCBiZXN0TWF0Y2hlcyA9IGNvbmNlcnRzLmZpbHRlcihldmVudCA9PiBldmVudC5tYXRjaFNjb3JlID49IDUwKTtcclxuICAgICAgY29uc3QgY29uY2VydHNXaXRoUHJpY2VzID0gW107XHJcblxyXG4gICAgICAvLyBQcm9jZXNzIGVhY2ggZXZlbnQgb25seSBvbmNlXHJcbiAgICAgIGNvbnN0IHByb2Nlc3NlZFVybHMgPSBuZXcgU2V0KCk7XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IGNvbmNlcnQgb2YgYmVzdE1hdGNoZXMpIHtcclxuICAgICAgICAvLyBTa2lwIGlmIHdlJ3ZlIGFscmVhZHkgcHJvY2Vzc2VkIHRoaXMgVVJMXHJcbiAgICAgICAgaWYgKHByb2Nlc3NlZFVybHMuaGFzKGNvbmNlcnQubGluaykpIHtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zb2xlLmxvZyhgUHJvY2Vzc2luZyBldmVudDogXCIke2NvbmNlcnQudGl0bGV9XCIgKG1hdGNoIHNjb3JlOiAke2NvbmNlcnQubWF0Y2hTY29yZX0pYCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gVXNlIHRoZSBleGlzdGluZyBwYWdlIHRvIG5hdmlnYXRlIHRvIHRoZSBldmVudFxyXG4gICAgICAgIGF3YWl0IHNlYXJjaFBhZ2UuZ290byhjb25jZXJ0LmxpbmssIHsgd2FpdFVudGlsOiAnbmV0d29ya2lkbGUwJywgdGltZW91dDogMzAwMDAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gRXh0cmFjdCB0aWNrZXRzIGRpcmVjdGx5IGZyb20gdGhlIGxvYWRlZCBwYWdlXHJcbiAgICAgICAgY29uc3QgdGlja2V0cyA9IGF3YWl0IHNlYXJjaFBhZ2UuZXZhbHVhdGUoKCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgZ3JvdXBMaXN0aW5ncyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtdGVzdGlkPVwibGlzdGluZy1ncm91cC1yb3ctY29udGFpbmVyXCJdJykpO1xyXG4gICAgICAgICAgY29uc3QgaW5kaXZpZHVhbExpc3RpbmdzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS10ZXN0aWQ9XCJsaXN0aW5nLXJvdy1jb250YWluZXJcIl0nKSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGBGb3VuZCAke2dyb3VwTGlzdGluZ3MubGVuZ3RofSBncm91cCBsaXN0aW5ncyBhbmQgJHtpbmRpdmlkdWFsTGlzdGluZ3MubGVuZ3RofSBpbmRpdmlkdWFsIGxpc3RpbmdzYCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGNvbnN0IGFsbExpc3RpbmdzID0gWy4uLmdyb3VwTGlzdGluZ3MsIC4uLmluZGl2aWR1YWxMaXN0aW5nc107XHJcblxyXG4gICAgICAgICAgY29uc3Qgbm9ybWFsaXplU2VjdGlvbiA9IChzZWN0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghc2VjdGlvbikgcmV0dXJuICdVTktOT1dOJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25VcHBlciA9IHNlY3Rpb24udG9VcHBlckNhc2UoKTtcclxuICAgICAgICAgICAgY29uc3QgY2F0ZWdvcmllcyA9IHtcclxuICAgICAgICAgICAgICAnR0VORVJBTCBBRE1JU1NJT04nOiBbJ0dBJywgJ0dFTicsICdHRU5BRE0nXSxcclxuICAgICAgICAgICAgICAnR1JBTkRTVEFORCc6IFsnR1JBTkQnLCAnR1NBREEnLCAnR1MnXSxcclxuICAgICAgICAgICAgICAnUFJFTUlVTSc6IFsnUFJFTScsICdQUk0nXSxcclxuICAgICAgICAgICAgICAnVklQJzogWydWSVAnXSxcclxuICAgICAgICAgICAgICAnQkFMQ09OWSc6IFsnQkFMJywgJ0JBTEMnXSxcclxuICAgICAgICAgICAgICAnRkxPT1InOiBbJ0ZMUicsICdGTE9PUiddLFxyXG4gICAgICAgICAgICAgICdTVEFORElORyc6IFsnU1RBTkQnXVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCBbY2F0ZWdvcnksIGtleXdvcmRzXSBvZiBPYmplY3QuZW50cmllcyhjYXRlZ29yaWVzKSkge1xyXG4gICAgICAgICAgICAgIGlmIChrZXl3b3Jkcy5zb21lKGtleXdvcmQgPT4gc2VjdGlvblVwcGVyLmluY2x1ZGVzKGtleXdvcmQpKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhdGVnb3J5O1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGBVTkNBVEVHT1JJWkVEOiAke3NlY3Rpb259YDtcclxuICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgY29uc3QgdGlja2V0c0J5U2VjdGlvbiA9IHt9O1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBhbGxMaXN0aW5ncy5mb3JFYWNoKChsaXN0aW5nLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHNlY3Rpb24gPSBsaXN0aW5nLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXRlc3RpZF49XCJHUkFORFNcIl0sIFtkYXRhLXRlc3RpZF49XCJHU0FEQVwiXSwgW2RhdGEtdGVzdGlkXj1cIlBSRU1cIl0sIFtkYXRhLXRlc3RpZF49XCJHRU5BRE1cIl0sIC5NdWlUeXBvZ3JhcGh5LXNtYWxsLW1lZGl1bScpPy50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnO1xyXG4gICAgICAgICAgICAgIGNvbnN0IHF1YW50aXR5ID0gbGlzdGluZy5xdWVyeVNlbGVjdG9yKCcuTXVpVHlwb2dyYXBoeS1jYXB0aW9uLXJlZ3VsYXInKT8udGV4dENvbnRlbnQ/LnRyaW0oKSB8fCAnJztcclxuICAgICAgICAgICAgICBjb25zdCBwcmljZSA9IGxpc3RpbmcucXVlcnlTZWxlY3RvcignW2RhdGEtdGVzdGlkPVwibGlzdGluZy1wcmljZVwiXScpPy50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnO1xyXG4gICAgICAgICAgICAgIGNvbnN0IHJvdyA9IGxpc3RpbmcucXVlcnlTZWxlY3RvcignW2RhdGEtdGVzdGlkPVwicm93XCJdJyk/LnRleHRDb250ZW50Py50cmltKCk7XHJcbiAgICAgICAgICAgICAgY29uc3QgZGVhbFNjb3JlID0gbGlzdGluZy5xdWVyeVNlbGVjdG9yKCdbZGF0YS10ZXN0aWQ9XCJkZWFsLXNjb3JlXCJdLCAuc3R5bGVzX2dyZWF0ZXN0U2NvcmVMYWJlbF9fS3E0TzMnKT8udGV4dENvbnRlbnQ/LnRyaW0oKSB8fCAnJztcclxuICAgICAgICAgICAgICBjb25zdCBsaXN0aW5nSWQgPSBsaXN0aW5nLmdldEF0dHJpYnV0ZSgnZGF0YS1saXN0aW5nLWlkJyk7XHJcblxyXG4gICAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRTZWN0aW9uID0gbm9ybWFsaXplU2VjdGlvbihzZWN0aW9uKTtcclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICBpZiAoIXRpY2tldHNCeVNlY3Rpb25bbm9ybWFsaXplZFNlY3Rpb25dKSB7XHJcbiAgICAgICAgICAgICAgICB0aWNrZXRzQnlTZWN0aW9uW25vcm1hbGl6ZWRTZWN0aW9uXSA9IHtcclxuICAgICAgICAgICAgICAgICAgc2VjdGlvbjogbm9ybWFsaXplZFNlY3Rpb24sXHJcbiAgICAgICAgICAgICAgICAgIG9yaWdpbmFsU2VjdGlvbjogc2VjdGlvbixcclxuICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IG5vcm1hbGl6ZWRTZWN0aW9uLnN0YXJ0c1dpdGgoJ1VOQ0FURUdPUklaRUQnKSA/ICdVTktOT1dOJyA6IG5vcm1hbGl6ZWRTZWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgICB0aWNrZXRzOiBbXVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGlmIChwcmljZSAmJiBzZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB0aWNrZXRzQnlTZWN0aW9uW25vcm1hbGl6ZWRTZWN0aW9uXS50aWNrZXRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICBxdWFudGl0eSxcclxuICAgICAgICAgICAgICAgICAgcHJpY2UsXHJcbiAgICAgICAgICAgICAgICAgIGRlYWxTY29yZSxcclxuICAgICAgICAgICAgICAgICAgcmF3UHJpY2U6IHBhcnNlRmxvYXQocHJpY2UucmVwbGFjZSgvW14wLTkuXS9nLCAnJykpLFxyXG4gICAgICAgICAgICAgICAgICByb3c6IHJvdyB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICBsaXN0aW5nSWQsXHJcbiAgICAgICAgICAgICAgICAgIG9yaWdpbmFsU2VjdGlvbjogc2VjdGlvbixcclxuICAgICAgICAgICAgICAgICAgbGlzdGluZ1VybDogd2luZG93LmxvY2F0aW9uLmhyZWZcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYEVycm9yIHByb2Nlc3NpbmcgbGlzdGluZyAke2luZGV4ICsgMX06YCwgZXJyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgT2JqZWN0LnZhbHVlcyh0aWNrZXRzQnlTZWN0aW9uKS5mb3JFYWNoKHNlY3Rpb24gPT4ge1xyXG4gICAgICAgICAgICBzZWN0aW9uLnRpY2tldHMuc29ydCgoYSwgYikgPT4gYS5yYXdQcmljZSAtIGIucmF3UHJpY2UpO1xyXG4gICAgICAgICAgICBzZWN0aW9uLmxvd2VzdFByaWNlID0gc2VjdGlvbi50aWNrZXRzWzBdPy5yYXdQcmljZSB8fCBudWxsO1xyXG4gICAgICAgICAgICBzZWN0aW9uLmhpZ2hlc3RQcmljZSA9IHNlY3Rpb24udGlja2V0c1tzZWN0aW9uLnRpY2tldHMubGVuZ3RoIC0gMV0/LnJhd1ByaWNlIHx8IG51bGw7XHJcbiAgICAgICAgICAgIHNlY3Rpb24ubnVtYmVyT2ZMaXN0aW5ncyA9IHNlY3Rpb24udGlja2V0cy5sZW5ndGg7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0b3RhbFNlY3Rpb25zOiBPYmplY3Qua2V5cyh0aWNrZXRzQnlTZWN0aW9uKS5sZW5ndGgsXHJcbiAgICAgICAgICAgIHNlY3Rpb25zOiBPYmplY3QudmFsdWVzKHRpY2tldHNCeVNlY3Rpb24pLnNvcnQoKGEsIGIpID0+IGEubG93ZXN0UHJpY2UgLSBiLmxvd2VzdFByaWNlKVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRpY2tldHMgJiYgdGlja2V0cy50b3RhbFNlY3Rpb25zID4gMCkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coYEZvdW5kIHRpY2tldHMgaW4gJHt0aWNrZXRzLnRvdGFsU2VjdGlvbnN9IHNlY3Rpb25zYCk7XHJcbiAgICAgICAgICBjb25jZXJ0c1dpdGhQcmljZXMucHVzaCh7XHJcbiAgICAgICAgICAgIC4uLmNvbmNlcnQsXHJcbiAgICAgICAgICAgIHRpY2tldHNcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTWFyayB0aGlzIFVSTCBhcyBwcm9jZXNzZWRcclxuICAgICAgICBwcm9jZXNzZWRVcmxzLmFkZChjb25jZXJ0LmxpbmspO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gY29uY2VydHNXaXRoUHJpY2VzO1xyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1ZpdmlkU2VhdHMgZXJyb3IgZGV0YWlsczonLCBlcnJvcik7XHJcbiAgICAgIGlmIChzZWFyY2hQYWdlKSB7XHJcbiAgICAgICAgYXdhaXQgc2VhcmNoUGFnZS5zY3JlZW5zaG90KHsgcGF0aDogJ3Zpdmlkc2VhdHMtZXJyb3IucG5nJywgZnVsbFBhZ2U6IHRydWUgfSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgaWYgKGJyb3dzZXIpIHtcclxuICAgICAgICBhd2FpdCBicm93c2VyLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGdldFRpY2tldFByaWNlcyhldmVudFVybCwgZXhpc3RpbmdQYWdlID0gbnVsbCkge1xyXG4gICAgbGV0IGJyb3dzZXIgPSBudWxsO1xyXG4gICAgbGV0IHBhZ2UgPSBleGlzdGluZ1BhZ2U7XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICghZXhpc3RpbmdQYWdlKSB7XHJcbiAgICAgICAgYnJvd3NlciA9IGF3YWl0IHNldHVwQnJvd3NlcigpO1xyXG4gICAgICAgIHBhZ2UgPSBhd2FpdCBzZXR1cFBhZ2UoYnJvd3Nlcik7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ05hdmlnYXRpbmcgdG8gZXZlbnQgcGFnZTonLCBldmVudFVybCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEZ1bmN0aW9uIHRvIGNoZWNrIGZvciBjb250ZW50XHJcbiAgICAgIGNvbnN0IGNoZWNrQ29udGVudCA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHBhZ2UuZXZhbHVhdGUoKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RvcnMgPSBbXHJcbiAgICAgICAgICAgICAgJy5zdHlsZXNfbGlzdGluZ1Jvd0NvbnRhaW5lcl9fS05NNF8nLFxyXG4gICAgICAgICAgICAgICcuc3R5bGVzX2xpc3RpbmdSb3dDb250YWluZXJfX2Q4V0xaJyxcclxuICAgICAgICAgICAgICAnW2RhdGEtdGVzdGlkPVwibGlzdGluZy1ncm91cC1yb3ctY29udGFpbmVyXCJdJyxcclxuICAgICAgICAgICAgICAnW2RhdGEtdGVzdGlkPVwibGlzdGluZy1yb3ctY29udGFpbmVyXCJdJ1xyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZm9yIChjb25zdCBzZWxlY3RvciBvZiBzZWxlY3RvcnMpIHtcclxuICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIHJldHVybiBjb250ZW50O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgY2hlY2tpbmcgY29udGVudDonLCBlcnJvcik7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gSW5pdGlhbCBuYXZpZ2F0aW9uXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgcGFnZS5nb3RvKGV2ZW50VXJsLCB7IHdhaXRVbnRpbDogJ2RvbWNvbnRlbnRsb2FkZWQnLCB0aW1lb3V0OiAzMDAwMCB9KTtcclxuICAgICAgICBhd2FpdCBwYWdlLndhaXRGb3JUaW1lb3V0KDIwMDApO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdJbml0aWFsIG5hdmlnYXRpb24gZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBDaGVjayBmb3IgY29udGVudFxyXG4gICAgICBsZXQgY29udGVudEZvdW5kID0gYXdhaXQgY2hlY2tDb250ZW50KCk7XHJcbiAgICAgIGxldCBhdHRlbXB0cyA9IDE7XHJcbiAgICAgIGNvbnN0IG1heEF0dGVtcHRzID0gMztcclxuXHJcbiAgICAgIHdoaWxlICghY29udGVudEZvdW5kICYmIGF0dGVtcHRzIDwgbWF4QXR0ZW1wdHMpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgQ29udGVudCBjaGVjayBhdHRlbXB0ICR7YXR0ZW1wdHN9IG9mICR7bWF4QXR0ZW1wdHN9YCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGF3YWl0IHBhZ2UucmVsb2FkKHsgd2FpdFVudGlsOiAnZG9tY29udGVudGxvYWRlZCcgfSk7XHJcbiAgICAgICAgICBhd2FpdCBwYWdlLndhaXRGb3JUaW1lb3V0KDIwMDApO1xyXG4gICAgICAgICAgY29udGVudEZvdW5kID0gYXdhaXQgY2hlY2tDb250ZW50KCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmIChjb250ZW50Rm91bmQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZvdW5kIGNvbnRlbnQgb24gYXR0ZW1wdCcsIGF0dGVtcHRzKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBvbiBhdHRlbXB0ICR7YXR0ZW1wdHN9OmAsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgYXR0ZW1wdHMrKztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCFjb250ZW50Rm91bmQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBmaW5kIGNvbnRlbnQgYWZ0ZXIgbXVsdGlwbGUgYXR0ZW1wdHMnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gRXh0cmFjdCB0aWNrZXRzIG9ubHkgaWYgY29udGVudCB3YXMgZm91bmRcclxuICAgICAgY29uc3QgdGlja2V0cyA9IGF3YWl0IHBhZ2UuZXZhbHVhdGUoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGdyb3VwTGlzdGluZ3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXRlc3RpZD1cImxpc3RpbmctZ3JvdXAtcm93LWNvbnRhaW5lclwiXScpKTtcclxuICAgICAgICBjb25zdCBpbmRpdmlkdWFsTGlzdGluZ3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXRlc3RpZD1cImxpc3Rpbmctcm93LWNvbnRhaW5lclwiXScpKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zb2xlLmxvZyhgRm91bmQgJHtncm91cExpc3RpbmdzLmxlbmd0aH0gZ3JvdXAgbGlzdGluZ3MgYW5kICR7aW5kaXZpZHVhbExpc3RpbmdzLmxlbmd0aH0gaW5kaXZpZHVhbCBsaXN0aW5nc2ApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGFsbExpc3RpbmdzID0gWy4uLmdyb3VwTGlzdGluZ3MsIC4uLmluZGl2aWR1YWxMaXN0aW5nc107XHJcblxyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZVNlY3Rpb24gPSAoc2VjdGlvbikgPT4ge1xyXG4gICAgICAgICAgaWYgKCFzZWN0aW9uKSByZXR1cm4gJ1VOS05PV04nO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBjb25zdCBzZWN0aW9uVXBwZXIgPSBzZWN0aW9uLnRvVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgICBjb25zdCBjYXRlZ29yaWVzID0ge1xyXG4gICAgICAgICAgICAnR0VORVJBTCBBRE1JU1NJT04nOiBbJ0dBJywgJ0dFTicsICdHRU5BRE0nXSxcclxuICAgICAgICAgICAgJ0dSQU5EU1RBTkQnOiBbJ0dSQU5EJywgJ0dTQURBJywgJ0dTJ10sXHJcbiAgICAgICAgICAgICdQUkVNSVVNJzogWydQUkVNJywgJ1BSTSddLFxyXG4gICAgICAgICAgICAnVklQJzogWydWSVAnXSxcclxuICAgICAgICAgICAgJ0JBTENPTlknOiBbJ0JBTCcsICdCQUxDJ10sXHJcbiAgICAgICAgICAgICdGTE9PUic6IFsnRkxSJywgJ0ZMT09SJ10sXHJcbiAgICAgICAgICAgICdTVEFORElORyc6IFsnU1RBTkQnXVxyXG4gICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICBmb3IgKGNvbnN0IFtjYXRlZ29yeSwga2V5d29yZHNdIG9mIE9iamVjdC5lbnRyaWVzKGNhdGVnb3JpZXMpKSB7XHJcbiAgICAgICAgICAgIGlmIChrZXl3b3Jkcy5zb21lKGtleXdvcmQgPT4gc2VjdGlvblVwcGVyLmluY2x1ZGVzKGtleXdvcmQpKSkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBjYXRlZ29yeTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiBgVU5DQVRFR09SSVpFRDogJHtzZWN0aW9ufWA7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgdGlja2V0c0J5U2VjdGlvbiA9IHt9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGFsbExpc3RpbmdzLmZvckVhY2goKGxpc3RpbmcsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uID0gbGlzdGluZy5xdWVyeVNlbGVjdG9yKCdbZGF0YS10ZXN0aWRePVwiR1JBTkRTXCJdLCBbZGF0YS10ZXN0aWRePVwiR1NBREFcIl0sIFtkYXRhLXRlc3RpZF49XCJQUkVNXCJdLCBbZGF0YS10ZXN0aWRePVwiR0VOQURNXCJdLCAuTXVpVHlwb2dyYXBoeS1zbWFsbC1tZWRpdW0nKT8udGV4dENvbnRlbnQ/LnRyaW0oKSB8fCAnJztcclxuICAgICAgICAgICAgY29uc3QgcXVhbnRpdHkgPSBsaXN0aW5nLnF1ZXJ5U2VsZWN0b3IoJy5NdWlUeXBvZ3JhcGh5LWNhcHRpb24tcmVndWxhcicpPy50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnO1xyXG4gICAgICAgICAgICBjb25zdCBwcmljZSA9IGxpc3RpbmcucXVlcnlTZWxlY3RvcignW2RhdGEtdGVzdGlkPVwibGlzdGluZy1wcmljZVwiXScpPy50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnO1xyXG4gICAgICAgICAgICBjb25zdCByb3cgPSBsaXN0aW5nLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXRlc3RpZD1cInJvd1wiXScpPy50ZXh0Q29udGVudD8udHJpbSgpO1xyXG4gICAgICAgICAgICBjb25zdCBkZWFsU2NvcmUgPSBsaXN0aW5nLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXRlc3RpZD1cImRlYWwtc2NvcmVcIl0sIC5zdHlsZXNfZ3JlYXRlc3RTY29yZUxhYmVsX19LcTRPMycpPy50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnO1xyXG4gICAgICAgICAgICBjb25zdCBsaXN0aW5nSWQgPSBsaXN0aW5nLmdldEF0dHJpYnV0ZSgnZGF0YS1saXN0aW5nLWlkJyk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkU2VjdGlvbiA9IG5vcm1hbGl6ZVNlY3Rpb24oc2VjdGlvbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIXRpY2tldHNCeVNlY3Rpb25bbm9ybWFsaXplZFNlY3Rpb25dKSB7XHJcbiAgICAgICAgICAgICAgdGlja2V0c0J5U2VjdGlvbltub3JtYWxpemVkU2VjdGlvbl0gPSB7XHJcbiAgICAgICAgICAgICAgICBzZWN0aW9uOiBub3JtYWxpemVkU2VjdGlvbixcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsU2VjdGlvbjogc2VjdGlvbixcclxuICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBub3JtYWxpemVkU2VjdGlvbi5zdGFydHNXaXRoKCdVTkNBVEVHT1JJWkVEJykgPyAnVU5LTk9XTicgOiBub3JtYWxpemVkU2VjdGlvbixcclxuICAgICAgICAgICAgICAgIHRpY2tldHM6IFtdXHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHByaWNlICYmIHNlY3Rpb24pIHtcclxuICAgICAgICAgICAgICB0aWNrZXRzQnlTZWN0aW9uW25vcm1hbGl6ZWRTZWN0aW9uXS50aWNrZXRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgcXVhbnRpdHksXHJcbiAgICAgICAgICAgICAgICBwcmljZSxcclxuICAgICAgICAgICAgICAgIGRlYWxTY29yZSxcclxuICAgICAgICAgICAgICAgIHJhd1ByaWNlOiBwYXJzZUZsb2F0KHByaWNlLnJlcGxhY2UoL1teMC05Ll0vZywgJycpKSxcclxuICAgICAgICAgICAgICAgIHJvdzogcm93IHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICBsaXN0aW5nSWQsXHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbFNlY3Rpb246IHNlY3Rpb24sXHJcbiAgICAgICAgICAgICAgICBsaXN0aW5nVXJsOiB3aW5kb3cubG9jYXRpb24uaHJlZlxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYEVycm9yIHByb2Nlc3NpbmcgbGlzdGluZyAke2luZGV4ICsgMX06YCwgZXJyKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgT2JqZWN0LnZhbHVlcyh0aWNrZXRzQnlTZWN0aW9uKS5mb3JFYWNoKHNlY3Rpb24gPT4ge1xyXG4gICAgICAgICAgc2VjdGlvbi50aWNrZXRzLnNvcnQoKGEsIGIpID0+IGEucmF3UHJpY2UgLSBiLnJhd1ByaWNlKTtcclxuICAgICAgICAgIHNlY3Rpb24ubG93ZXN0UHJpY2UgPSBzZWN0aW9uLnRpY2tldHNbMF0/LnJhd1ByaWNlIHx8IG51bGw7XHJcbiAgICAgICAgICBzZWN0aW9uLmhpZ2hlc3RQcmljZSA9IHNlY3Rpb24udGlja2V0c1tzZWN0aW9uLnRpY2tldHMubGVuZ3RoIC0gMV0/LnJhd1ByaWNlIHx8IG51bGw7XHJcbiAgICAgICAgICBzZWN0aW9uLm51bWJlck9mTGlzdGluZ3MgPSBzZWN0aW9uLnRpY2tldHMubGVuZ3RoO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgdG90YWxTZWN0aW9uczogT2JqZWN0LmtleXModGlja2V0c0J5U2VjdGlvbikubGVuZ3RoLFxyXG4gICAgICAgICAgc2VjdGlvbnM6IE9iamVjdC52YWx1ZXModGlja2V0c0J5U2VjdGlvbikuc29ydCgoYSwgYikgPT4gYS5sb3dlc3RQcmljZSAtIGIubG93ZXN0UHJpY2UpXHJcbiAgICAgICAgfTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhgRm91bmQgdGlja2V0cyBpbiAke3RpY2tldHMudG90YWxTZWN0aW9uc30gc2VjdGlvbnNgKTtcclxuICAgICAgcmV0dXJuIHRpY2tldHM7XHJcblxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdGlja2V0IHByaWNlczonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiB7IHRvdGFsU2VjdGlvbnM6IDAsIHNlY3Rpb25zOiBbXSB9O1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgaWYgKGJyb3dzZXIgJiYgIWV4aXN0aW5nUGFnZSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBhd2FpdCBicm93c2VyLmNsb3NlKCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBjbG9zaW5nIGJyb3dzZXI6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVml2aWRTZWF0c1NlYXJjaGVyOyJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJjb25maWciLCJzZXR1cEJyb3dzZXIiLCJzZXR1cFBhZ2UiLCJmb3JtYXRQcmljZSIsInBhcnNlIiwic3VwYWJhc2UiLCJ1cmwiLCJzZXJ2aWNlS2V5IiwiZXZlbnRFeGlzdHMiLCJuYW1lIiwiZGF0ZSIsImRhdGEiLCJlcnJvciIsImZyb20iLCJzZWxlY3QiLCJlcSIsInNpbmdsZSIsImNvZGUiLCJjb25zb2xlIiwibGlua0V4aXN0cyIsImV2ZW50SWQiLCJzb3VyY2UiLCJpbnNlcnRFdmVudCIsImV2ZW50IiwicGFyc2VkRGF0ZSIsIkRhdGUiLCJsb2ciLCJnZXRUaW1lIiwiaXNOYU4iLCJleGlzdHMiLCJ0aXRsZSIsInRvSVNPU3RyaW5nIiwiZXZlbnREYXRhIiwidHlwZSIsImNhdGVnb3J5IiwidmVudWUiLCJpbnNlcnQiLCJtZXNzYWdlIiwiZGV0YWlscyIsImhpbnQiLCJpZCIsImluc2VydEV2ZW50TGluayIsImxpbmtEYXRhIiwiZXZlbnRfaWQiLCJpbnNlcnRUaWNrZXRzIiwidGlja2V0cyIsImZvcm1hdHRlZFRpY2tldHMiLCJzZWN0aW9ucyIsImZsYXRNYXAiLCJzZWN0aW9uIiwibWFwIiwidGlja2V0IiwicHJpY2UiLCJyYXdQcmljZSIsInJvdyIsInF1YW50aXR5IiwicGFyc2VJbnQiLCJsaXN0aW5nVXJsIiwicmF3X2RhdGEiLCJsZW5ndGgiLCJtYWluU2VhcmNoIiwiYXJ0aXN0IiwibG9jYXRpb24iLCJzZWFyY2hlciIsIlZpdmlkU2VhdHNTZWFyY2hlciIsImNvbmNlcnRzV2l0aFByaWNlcyIsInNlYXJjaENvbmNlcnRzIiwiY29uY2VydCIsImxpbmsiLCJjb25zdHJ1Y3RvciIsImJhc2VVcmwiLCJnZW5lcmF0ZVNlYXJjaFVybCIsInNlYXJjaFBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsInNlYXJjaFRlcm1zIiwicHVzaCIsImFwcGVuZCIsImpvaW4iLCJ0b1N0cmluZyIsImJyb3dzZXIiLCJzZWFyY2hQYWdlIiwic2VhcmNoVXJsIiwiZ290byIsIndhaXRVbnRpbCIsInRpbWVvdXQiLCJ3YWl0Rm9yU2VsZWN0b3IiLCJjb25jZXJ0cyIsImV2YWx1YXRlIiwicHJvZHVjdGlvbkxpc3RzIiwiQXJyYXkiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJhbGxFdmVudHMiLCJmb3JFYWNoIiwibGlzdCIsImxpc3RpbmdzIiwibGlzdGluZyIsImFuY2hvciIsInF1ZXJ5U2VsZWN0b3IiLCJocmVmIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsImRhdGVFbGVtZW50IiwiZGF5T2ZXZWVrIiwidGV4dENvbnRlbnQiLCJ0cmltIiwieWVhciIsInRpbWUiLCJ0aXRsZUVsZW1lbnQiLCJsYWJlbENvbnRhaW5lciIsInRydW5jYXRlU3BhbnMiLCJldmVudExvY2F0aW9uIiwicmF3RGF0YSIsImZ1bGxUaXRsZSIsImVyciIsInNjb3JlIiwibWF0Y2hTY29yZSIsInNvcnQiLCJhIiwiYiIsImJlc3RNYXRjaGVzIiwiZmlsdGVyIiwicHJvY2Vzc2VkVXJscyIsIlNldCIsImhhcyIsImdyb3VwTGlzdGluZ3MiLCJpbmRpdmlkdWFsTGlzdGluZ3MiLCJhbGxMaXN0aW5ncyIsIm5vcm1hbGl6ZVNlY3Rpb24iLCJzZWN0aW9uVXBwZXIiLCJ0b1VwcGVyQ2FzZSIsImNhdGVnb3JpZXMiLCJrZXl3b3JkcyIsIk9iamVjdCIsImVudHJpZXMiLCJzb21lIiwia2V5d29yZCIsInRpY2tldHNCeVNlY3Rpb24iLCJpbmRleCIsImRlYWxTY29yZSIsImxpc3RpbmdJZCIsImdldEF0dHJpYnV0ZSIsIm5vcm1hbGl6ZWRTZWN0aW9uIiwib3JpZ2luYWxTZWN0aW9uIiwic3RhcnRzV2l0aCIsInBhcnNlRmxvYXQiLCJyZXBsYWNlIiwid2luZG93IiwidmFsdWVzIiwibG93ZXN0UHJpY2UiLCJoaWdoZXN0UHJpY2UiLCJudW1iZXJPZkxpc3RpbmdzIiwidG90YWxTZWN0aW9ucyIsImtleXMiLCJhZGQiLCJzY3JlZW5zaG90IiwicGF0aCIsImZ1bGxQYWdlIiwiY2xvc2UiLCJnZXRUaWNrZXRQcmljZXMiLCJldmVudFVybCIsImV4aXN0aW5nUGFnZSIsInBhZ2UiLCJjaGVja0NvbnRlbnQiLCJjb250ZW50Iiwic2VsZWN0b3JzIiwic2VsZWN0b3IiLCJ3YWl0Rm9yVGltZW91dCIsImNvbnRlbnRGb3VuZCIsImF0dGVtcHRzIiwibWF4QXR0ZW1wdHMiLCJyZWxvYWQiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/vivid-seats.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/date-fns"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fevents%2Fsearch&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cevents%5Csearch.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();